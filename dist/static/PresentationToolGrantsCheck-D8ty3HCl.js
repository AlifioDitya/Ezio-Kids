const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-Dtg20FVT.js","static/sanity.config-vIbYMf5O.js","static/LiveQueries-BPeGjFl7.js","static/DisplayedDocumentBroadcaster-CGd_HecV.js","static/PostMessageDocuments-BP53yoTj.js","static/PostMessageRefreshMutations-BgtD_hHA.js","static/PostMessagePerspective-CfEY8nZU.js","static/PostMessagePreviewSnapshots-I52x96s1.js","static/PostMessageSchema-0-5HZzOM.js","static/PostMessageTelemetry-BGnJQy2_.js"])))=>i.map(i=>d[i]);
import{ao as kn,a as y,ap as jr,aq as An,j as u,ar as lr,as as Lr,at as Gt,au as ae,av as In,h as nr,aw as Qt,ax as Or,ay as ur,az as Un,aA as $n,aB as ar,aC as Mn,aD as Dn,aE as dr,aF as pr,aG as mt,aH as vt,aI as mr,aJ as hr,aK as yt,aL as fr,aM as gr,ac as zr,aN as Ln,aO as Wr,aP as On,aQ as zn,d as z,aR as se,aS as Nr,aT as Wn,u as Lt,aU as Fr,aV as Vr,aW as bt,n as Ot,p as Ae,aX as Ie,aY as Br,aZ as Kr,a_ as Nn,a$ as Hr,b0 as Fn,a6 as Vn,z as It,x as Bn,q as qr,b1 as Kn,b2 as we,b3 as Hn,b4 as vr,b5 as qn,b6 as Er,b7 as Gn,ai as wr,b8 as Qn,b9 as Gr,ba as sr,bb as Xn,C as he,F as ue,bc as Qr,bd as xt,be as ze,l as Ut,T as ie,S as qe,aa as $t,f as Mt,bf as We,bg as Jn,bh as Xr,bi as yr,bj as Yn,bk as Zn,bl as ea,J as be,ag as ta,N as ye,c as ra,bm as br,bn as Pt,bo as na,bp as aa,Q as sa,bq as Jr,br as wt,bs as ia,bt as zt,bu as oa,bv as ca,bw as la,bx as ua,by as Yr,bz as da,bA as pa,bB as ma,bC as ha,bD as fa,W as ga,Y as va,bE as wa,bF as ya,X as ba,bG as xa,bH as Pa,bI as Sa,bJ as _a,bK as ja,bL as Ea,bM as Zr,bN as Ra,bO as en,bP as tn,bQ as Ca,bR as Ta,bS as ka,bT as Aa,bU as Ia,bV as Ua,bW as $a,bX as Ma,a1 as Da,bY as La,bZ as Oa}from"./sanity.config-vIbYMf5O.js";import{D as za,i as Wa}from"./DisplayedDocumentBroadcaster-CGd_HecV.js";function Na({children:t,isValidProp:e,...r}){e&&kn(e),r={...y.useContext(jr),...r},r.isStatic=An(()=>r.isStatic);const a=y.useMemo(()=>r,[JSON.stringify(r.transition),r.transformPagePoint,r.reducedMotion]);return u.jsx(jr.Provider,{value:a,children:t})}const ce=[];for(let t=0;t<256;++t)ce.push((t+256).toString(16).slice(1));function Fa(t,e=0){return(ce[t[e+0]]+ce[t[e+1]]+ce[t[e+2]]+ce[t[e+3]]+"-"+ce[t[e+4]]+ce[t[e+5]]+"-"+ce[t[e+6]]+ce[t[e+7]]+"-"+ce[t[e+8]]+ce[t[e+9]]+"-"+ce[t[e+10]]+ce[t[e+11]]+ce[t[e+12]]+ce[t[e+13]]+ce[t[e+14]]+ce[t[e+15]]).toLowerCase()}let Xt;const Va=new Uint8Array(16);function Ba(){if(!Xt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xt=crypto.getRandomValues.bind(crypto)}return Xt(Va)}const Ka=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rr={randomUUID:Ka};function Ha(t,e,r){t=t||{};const a=t.random??t.rng?.()??Ba();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Fa(a)}function qa(t,e,r){return Rr.randomUUID&&!t?Rr.randomUUID():Ha(t)}const Ga=t=>e=>{const{data:r}=e;return(t.include.length?t.include.includes(r.type):!0)&&(t.exclude.length?!t.exclude.includes(r.type):!0)&&r.domain===t.domain&&r.from===t.from&&r.to===t.to&&(!t.target||e.source===t.target)},Qa=t=>e=>({type:t,message:e}),Xa=In(()=>ar(window,"message")),Ja=t=>Lr(({input:e})=>Xa.pipe(t?nr(t):Qt(),Or(Ga(e)),nr(Qa(e.responseType)),e.count?Qt($n(e.count),Un(r=>r),ur(e.count)):Qt())),rn="sanity/comlink",Ya=3e3,xr="comlink/response",nn="comlink/heartbeat",an="comlink/disconnect",sn="comlink/handshake/syn",on="comlink/handshake/syn-ack",cn="comlink/handshake/ack",Za=t=>e=>e.pipe(ur(1),nr(()=>{throw new Error(t)})),es=()=>lr({actors:{listen:Lr(({input:t})=>{const e=t.signal?ar(t.signal,"abort").pipe(Za(`Request ${t.requestId} aborted`)):Mn,r=a=>a.data?.type===xr&&a.data?.responseTo===t.requestId&&!!a.source&&t.sources.has(a.source);return ar(window,"message").pipe(Or(r),ur(t.sources.size),Dn(e))})},actions:{"send message":({context:t},e)=>{const{sources:r,targetOrigin:a}=t,{message:s}=e;r.forEach(n=>{n.postMessage(s,{targetOrigin:a})})},"on success":Gt(({context:t})=>t.parentRef,({context:t,self:e})=>(t.response&&t.resolvable?.resolve(t.response),{type:"request.success",requestId:e.id,response:t.response,responseTo:t.responseTo})),"on fail":Gt(({context:t})=>t.parentRef,({context:t,self:e})=>(t.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${t.type}' on client '${t.from}' (ID: '${t.id}').`),t.resolvable?.reject(new Error("No response received")),{type:"request.failed",requestId:e.id})),"on abort":Gt(({context:t})=>t.parentRef,({context:t,self:e})=>(t.resolvable?.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}))},guards:{expectsResponse:({context:t})=>t.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:t})=>t.responseTimeout??Ya}}).createMachine({context:({input:t})=>({channelId:t.channelId,data:t.data,domain:t.domain,expectResponse:t.expectResponse??!1,from:t.from,id:`msg-${qa()}`,parentRef:t.parentRef,resolvable:t.resolvable,response:null,responseTimeout:t.responseTimeout,responseTo:t.responseTo,signal:t.signal,sources:t.sources instanceof Set?t.sources:new Set([t.sources]),suppressWarnings:t.suppressWarnings,targetOrigin:t.targetOrigin,to:t.to,type:t.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:t})=>{const{channelId:e,data:r,domain:a,from:s,id:n,responseTo:i,to:o,type:c}=t;return{message:{channelId:e,data:r,domain:a,from:s,id:n,to:o,type:c,responseTo:i}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:t})=>({requestId:t.id,sources:t.sources,signal:t.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:ae({response:({event:t})=>t.data.data,responseTo:({event:t})=>t.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:t,self:e})=>({requestId:e.id,response:t.response,responseTo:t.responseTo})}),ts={"handshake/syn":sn,"handshake/syn-ack":on,"handshake/ack":cn,"channel/response":xr,"channel/heartbeat":nn,"channel/disconnect":an,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},rs={[sn]:"handshake/syn",[on]:"handshake/syn-ack",[cn]:"handshake/ack",[xr]:"channel/response",[nn]:"channel/heartbeat",[an]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},ns=t=>{const{data:e}=t;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=rn),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=ts[e.type]??e.type),t},as=t=>{const{channelId:e,...r}=t,a={...r,connectionId:e};return a.domain===rn&&(a.domain="sanity/channels"),a.to==="visual-editing"&&(a.to="overlays"),a.from==="visual-editing"&&(a.from="overlays"),a.type=rs[a.type]??a.type,a.type==="channel/response"&&a.responseTo&&!a.data&&(a.data={responseTo:a.responseTo}),(a.type==="handshake/syn"||a.type==="handshake/syn-ack"||a.type==="handshake/ack")&&(a.data={id:a.connectionId}),a},ss=({context:t},e)=>{const{sources:r,targetOrigin:a}=t,s=as(e.message);r.forEach(n=>{n.postMessage(s,{targetOrigin:a})})},ir=()=>({listen:Ja(ns),requestMachine:es().provide({actions:{"send message":ss}})}),le=[];for(let t=0;t<256;++t)le.push((t+256).toString(16).slice(1));function is(t,e=0){return(le[t[e+0]]+le[t[e+1]]+le[t[e+2]]+le[t[e+3]]+"-"+le[t[e+4]]+le[t[e+5]]+"-"+le[t[e+6]]+le[t[e+7]]+"-"+le[t[e+8]]+le[t[e+9]]+"-"+le[t[e+10]]+le[t[e+11]]+le[t[e+12]]+le[t[e+13]]+le[t[e+14]]+le[t[e+15]]).toLowerCase()}let Jt;const os=new Uint8Array(16);function cs(){if(!Jt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Jt=crypto.getRandomValues.bind(crypto)}return Jt(os)}const ls=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cr={randomUUID:ls};function us(t,e,r){if(Cr.randomUUID&&!t)return Cr.randomUUID();t=t||{};const a=t.random??t.rng?.()??cs();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,is(a)}function ds(t){const e=new URL(t),{searchParams:r}=e;return r.delete(dr),r.delete(pr),r.delete(mt),r.delete(vt),r.delete(mr),e}function ps(t,e,r,a){const s=new URL(t),{searchParams:n}=s;return e&&(n.set(pr,e),n.set(dr,r)),n.set(mt,a),s}function ln(){if(typeof crypto<"u"){const t=new Uint8Array(16);crypto.getRandomValues(t);let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function ms(t,e,r,a){const s=t.withConfig({apiVersion:hr}),n=ln(),i=s.patch(yt).set({secret:n,studioUrl:r,userId:a});return await s.transaction().createIfNotExists({_id:yt,_type:fr,source:e,studioUrl:r,userId:a}).patch(i).commit({tag:gr}),{secret:n}}async function hs(t,e,r,a){const s=t.withConfig({apiVersion:hr}),n=s.patch(yt).set({secret:null,studioUrl:r,userId:a});await s.transaction().createIfNotExists({_id:yt,_type:fr,source:e,studioUrl:r,userId:a}).patch(n).commit({tag:gr})}function fs(t){for(var e=[],r=0;r<t.length;){var a=t[r];if(a==="*"||a==="+"||a==="?"){e.push({type:"MODIFIER",index:r,value:t[r++]});continue}if(a==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(a==="{"){e.push({type:"OPEN",index:r,value:t[r++]});continue}if(a==="}"){e.push({type:"CLOSE",index:r,value:t[r++]});continue}if(a===":"){for(var s="",n=r+1;n<t.length;){var i=t.charCodeAt(n);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){s+=t[n++];continue}break}if(!s)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:s}),r=n;continue}if(a==="("){var o=1,c="",n=r+1;if(t[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<t.length;){if(t[n]==="\\"){c+=t[n++]+t[n++];continue}if(t[n]===")"){if(o--,o===0){n++;break}}else if(t[n]==="("&&(o++,t[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));c+=t[n++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(r));if(!c)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:c}),r=n;continue}e.push({type:"CHAR",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}function gs(t,e){e===void 0&&(e={});for(var r=fs(t),a=e.prefixes,s=a===void 0?"./":a,n=e.delimiter,i=n===void 0?"/#?":n,o=[],c=0,l=0,m="",p=function(g){if(l<r.length&&r[l].type===g)return r[l++].value},h=function(g){var T=p(g);if(T!==void 0)return T;var U=r[l],A=U.type,$=U.index;throw new TypeError("Unexpected ".concat(A," at ").concat($,", expected ").concat(g))},d=function(){for(var g="",T;T=p("CHAR")||p("ESCAPED_CHAR");)g+=T;return g},f=function(g){for(var T=0,U=i;T<U.length;T++){var A=U[T];if(g.indexOf(A)>-1)return!0}return!1},v=function(g){var T=o[o.length-1],U=g||(T&&typeof T=="string"?T:"");if(T&&!U)throw new TypeError('Must have text between two parameters, missing text after "'.concat(T.name,'"'));return!U||f(U)?"[^".concat(Be(i),"]+?"):"(?:(?!".concat(Be(U),")[^").concat(Be(i),"])+?")};l<r.length;){var b=p("CHAR"),w=p("NAME"),P=p("PATTERN");if(w||P){var j=b||"";s.indexOf(j)===-1&&(m+=j,j=""),m&&(o.push(m),m=""),o.push({name:w||c++,prefix:j,suffix:"",pattern:P||v(j),modifier:p("MODIFIER")||""});continue}var x=b||p("ESCAPED_CHAR");if(x){m+=x;continue}m&&(o.push(m),m="");var S=p("OPEN");if(S){var j=d(),E=p("NAME")||"",_=p("PATTERN")||"",R=d();h("CLOSE"),o.push({name:E||(_?c++:""),pattern:E&&!_?v(j):_,prefix:j,suffix:R,modifier:p("MODIFIER")||""});continue}h("END")}return o}function vs(t,e){var r=[],a=dn(t,r,e);return ws(a,r,e)}function ws(t,e,r){r===void 0&&(r={});var a=r.decode,s=a===void 0?function(n){return n}:a;return function(n){var i=t.exec(n);if(!i)return!1;for(var o=i[0],c=i.index,l=Object.create(null),m=function(h){if(i[h]===void 0)return"continue";var d=e[h-1];d.modifier==="*"||d.modifier==="+"?l[d.name]=i[h].split(d.prefix+d.suffix).map(function(f){return s(f,d)}):l[d.name]=s(i[h],d)},p=1;p<i.length;p++)m(p);return{path:o,index:c,params:l}}}function Be(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function un(t){return t&&t.sensitive?"":"i"}function ys(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,s=r.exec(t.source);s;)e.push({name:s[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),s=r.exec(t.source);return t}function bs(t,e,r){var a=t.map(function(s){return dn(s,e,r).source});return new RegExp("(?:".concat(a.join("|"),")"),un(r))}function xs(t,e,r){return Ps(gs(t,r),e,r)}function Ps(t,e,r){r===void 0&&(r={});for(var a=r.strict,s=a===void 0?!1:a,n=r.start,i=n===void 0?!0:n,o=r.end,c=o===void 0?!0:o,l=r.encode,m=l===void 0?function(T){return T}:l,p=r.delimiter,h=p===void 0?"/#?":p,d=r.endsWith,f=d===void 0?"":d,v="[".concat(Be(f),"]|$"),b="[".concat(Be(h),"]"),w=i?"^":"",P=0,j=t;P<j.length;P++){var x=j[P];if(typeof x=="string")w+=Be(m(x));else{var S=Be(m(x.prefix)),E=Be(m(x.suffix));if(x.pattern)if(e&&e.push(x),S||E)if(x.modifier==="+"||x.modifier==="*"){var _=x.modifier==="*"?"?":"";w+="(?:".concat(S,"((?:").concat(x.pattern,")(?:").concat(E).concat(S,"(?:").concat(x.pattern,"))*)").concat(E,")").concat(_)}else w+="(?:".concat(S,"(").concat(x.pattern,")").concat(E,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));w+="(".concat(x.pattern,")").concat(x.modifier)}else w+="(?:".concat(S).concat(E,")").concat(x.modifier)}}if(c)s||(w+="".concat(b,"?")),w+=r.endsWith?"(?=".concat(v,")"):"$";else{var R=t[t.length-1],g=typeof R=="string"?b.indexOf(R[R.length-1])>-1:R===void 0;s||(w+="(?:".concat(b,"(?=").concat(v,"))?")),g||(w+="(?=".concat(b,"|").concat(v,")"))}return new RegExp(w,un(r))}function dn(t,e,r){return t instanceof RegExp?ys(t,e):Array.isArray(t)?bs(t,e,r):xs(t,e,r)}async function Ss(t,e,r,a,s=zr()){const n=t.withConfig({apiVersion:hr});try{const i=new Date(Date.now()+1e3*Ln),o=`drafts.${s}`,c=ln(),l=n.patch(o).set({secret:c,source:e,studioUrl:r,userId:a});return await n.transaction().createOrReplace({_id:o,_type:Wr}).patch(l).commit({tag:gr}),{secret:c,expiresAt:i}}finally{try{await n.delete({query:On})}catch(i){console.error("Failed to delete expired secrets",i)}}}function _s(t,e){let r=new AbortController,a=[];async function s(i,o){const{result:c,syncTags:l}=await t.fetch(zn,{},{filterResponse:!1,lastLiveEventId:i,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(l)&&(a=l),o.aborted||e(c)}const n=t.live.events().subscribe({next:i=>{i.type==="message"&&(r.abort(),r=new AbortController,i.tags.some(o=>a.includes(o))&&s(i.id,r.signal))},error:i=>console.error(i)});return s(null,r.signal),()=>{n.unsubscribe(),r.abort()}}const js=t=>{const e=z.c(3),{comlink:r}=t;let a,s;return e[0]!==r?(a=()=>r.on("visual-editing/features",Rs),s=[r],e[0]=r,e[1]=a,e[2]=s):(a=e[1],s=e[2]),y.useEffect(a,s),null};var Es=y.memo(js);function Rs(){return{features:{optimistic:!0}}}const Cs=lr({actions:{},actors:{},guards:{}}).createMachine({id:"Presentation Tool",context:{url:null,error:null,visualEditingOverlaysEnabled:!1},on:{"iframe reload":{actions:ae({url:null}),target:".loading"}},states:{error:{description:"Failed to load, either because of a misconfiguration, a network error, or an unexpected error",tags:["error"]},loading:{on:{"iframe loaded":{target:"loaded"}},tags:["busy"]},loaded:{on:{"toggle visual editing overlays":{actions:ae({visualEditingOverlaysEnabled:({event:t})=>t.enabled})},"iframe refresh":{target:".refreshing"},"iframe reload":{target:".reloading"}},states:{idle:{},refreshing:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]},reloading:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]}},initial:"idle"}},initial:"loading"}),Ts=function(t){const e=z.c(14),{comlink:r,children:a}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={},e[0]=s):s=e[0];const n=y.useRef(s);let i,o;e[1]!==r?(i=()=>r?.on("visual-editing/shared-state",()=>({state:n.current})),o=[r],e[1]=r,e[2]=i,e[3]=o):(i=e[2],o=e[3]),y.useEffect(i,o);let c;e[4]!==r?(c=(v,b)=>{n.current[v]=b,r?.post("presentation/shared-state",{key:v,value:b})},e[4]=r,e[5]=c):c=e[5];const l=c;let m;e[6]!==r?(m=v=>{r?.post("presentation/shared-state",{key:v}),delete n.current[v]},e[6]=r,e[7]=m):m=e[7];const p=m;let h;e[8]!==p||e[9]!==l?(h={removeValue:p,setValue:l},e[8]=p,e[9]=l,e[10]=h):h=e[10];const d=h;let f;return e[11]!==a||e[12]!==d?(f=u.jsx(Pa.Provider,{value:d,children:a}),e[11]=a,e[12]=d,e[13]=f):f=e[13],f},ks=be.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Pr=function(t){const e=z.c(15),{children:r,defaultSize:a,id:s,minWidth:n,maxWidth:i,order:o}=t,c=a===void 0?null:a,l=o===void 0?0:o,m=y.useContext(yr);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:p,registerElement:h,unregisterElement:d}=m;let f;e[0]!==p||e[1]!==s?(f=p(s),e[0]=p,e[1]=s,e[2]=f):f=e[2];const v=f;let b,w;e[3]!==c||e[4]!==s||e[5]!==i||e[6]!==n||e[7]!==l||e[8]!==h||e[9]!==d?(b=()=>(h(s,{id:s,type:"panel",defaultSize:c,maxWidth:i??null,minWidth:n??0,order:l}),()=>{d(s)}),w=[s,c,l,i,n,h,d],e[3]=c,e[4]=s,e[5]=i,e[6]=n,e[7]=l,e[8]=h,e[9]=d,e[10]=b,e[11]=w):(b=e[10],w=e[11]),y.useLayoutEffect(b,w);let P;return e[12]!==r||e[13]!==v?(P=u.jsx(ks,{style:v,children:r}),e[12]=r,e[13]=v,e[14]=P):P=e[14],P};function pn(t,e){let r;return(...a)=>{clearTimeout(r),r=setTimeout(()=>{t.apply(t,a)},e)}}const mn="presentation/panels",hn=()=>JSON.parse(localStorage.getItem(mn)||"{}"),As=t=>{localStorage.setItem(mn,JSON.stringify(t))},fn=t=>t.map(e=>[e.id,e.order].join(":")).join(",");function Is(){const t=z.c(1),e=$s,r=Us;let a;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const s=pn(r,100);a={get:e,set:r,setDebounced:s},t[0]=a}else a=t[0];return a}function Us(t,e){const r=hn(),a=fn(t),s={...r,[a]:e};As(s)}function $s(t){const e=hn(),r=fn(t);return Array.isArray(e[r])&&e[r].some(Ms)?void 0:e[r]}function Ms(t){return t===null}function or(t,e,r){const{maxWidth:a,minWidth:s}=t,n=a==null?100:a/r*100,i=s/r*100;return Math.min(n,Math.max(i,e))}function Ds(t,e,r,a,s,n){const{panels:i,widths:o}=s,{widths:c}=n,l=c||o,m=[...l];{const f=t<0?a:r,v=i.findIndex(P=>P.id===f.id),b=l[v],w=or(f,b+Math.abs(t),e);if(b===w)return l;t=t<0?b-w:w-b}let p=0,h=t<0?r:a,d=i.findIndex(f=>f.id===h.id);for(;;){const f=i[d],v=l[d],b=Math.abs(t)-Math.abs(p),w=or(f,v-b,e);if(v!==w&&(p+=v-w,m[d]=w,p.toPrecision(10).localeCompare(Math.abs(t).toPrecision(10),void 0,{numeric:!0})>=0))break;if(t<0){if(--d<0)break}else if(++d>=i.length)break}return p===0?l:(h=t<0?a:r,d=i.findIndex(f=>f.id===h.id),m[d]=l[d]+p,m)}function Ls(t,e,r){if(t.length===1)return"100";const a=t.findIndex(n=>n.id===e),s=r[a];return s==null?"0":s.toPrecision(10)}function Tr(t,e,r=0,a=null){const s=t.clientX,n=(a||e.getBoundingClientRect()).left;return s-n-r}function Yt(t){return t.type==="panel"}function kr(t){return t.type==="resizer"}function Ar(t){return Array.from(t.values()).sort(({order:e},{order:r})=>e==null&&r==null?0:e==null?-1:r==null?1:e-r)}function Ir(t,e,r){const a=e.reduce((i,o)=>i+o,0),s=[...e].map(i=>i/a*100);let n=0;for(let i=0;i<t.length;i++){const o=t[i],c=s[i],l=or(o,c,r);c!=l&&(n+=c-l,s[i]=l)}if(n.toFixed(3)!=="0.000")for(let i=0;i<t.length;i++){const o=t[i];let{maxWidth:c,minWidth:l}=o;l=l/r*100,c!=null&&(c=c/r*100);const m=Math.min(c??100,Math.max(l,s[i]+n));if(m!==s[i]&&(n-=m-s[i],s[i]=m,Math.abs(n).toFixed(3)==="0.000"))break}return s}function Os(t){let e=t.length,r=100;const a=t.map(n=>n.defaultSize?(r-=n.defaultSize,e-=1,n.defaultSize):null),s=r/e;return a.map(n=>n===null?s:n)}const zs=be.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,Ws=function(t){const e=z.c(46),{children:r}=t,a=y.useRef(null);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Map,e[0]=s):s=e[0];const[n,i]=y.useState(s);let o;e[1]!==n?(o=Ar(n).filter(Yt),e[1]=n,e[2]=o):o=e[2];const c=o;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[3]=l):l=e[3];const[m,p]=y.useState(l),[h,d]=y.useState(null);let f;e[4]!==n||e[5]!==c||e[6]!==m?(f={elements:n,panels:c,widths:m},e[4]=n,e[5]=c,e[6]=m,e[7]=f):f=e[7];const v=y.useRef(f);let b;e[8]!==h||e[9]!==c||e[10]!==m?(b=M=>({flexGrow:Ls(c,M,m),pointerEvents:h===null?void 0:"none"}),e[8]=h,e[9]=c,e[10]=m,e[11]=b):b=e[11];const w=b;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=(M,F)=>{i(H=>{if(H.has(M))return H;const ee=new Map(H);return ee.set(M,F),ee})},e[12]=P):P=e[12];const j=P;let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=M=>{i(F=>{if(!F.has(M))return F;const H=new Map(F);return H.delete(M),H})},e[13]=x):x=e[13];const S=x;let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=E):E=e[14];const _=y.useRef(E);let R;e[15]!==n?(R=(M,F)=>{const H=Ar(n),ee=H.findIndex(I=>I.id===M),Y=n.get(M);if(!Y||!kr(Y))return;const re=Y.el.current;re&&(_.current={resizerIndex:ee,panelBefore:H.reduce((I,G,Q)=>Yt(G)&&Q<ee?G:I,null),panelAfter:H.reduce((I,G,Q)=>I===null&&Yt(G)&&Q>ee?G:I,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:Tr(F,re),resizerRect:re.getBoundingClientRect(),widths:v.current.widths},d(M))},e[15]=n,e[16]=R):R=e[16];const g=R;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{d(null)},e[17]=T):T=e[17];const U=T;let A;e[18]!==n?(A=(M,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:H,dragOffset:ee,panelBefore:Y,panelAfter:re,resizerRect:I}=_.current;if(Y==null||re==null)return;const G=n.get(M);if(!G||!kr(G))return;const Q=G.el.current;if(!Q)return;const oe=Tr(F,Q,ee,I);if(oe===0)return;const{widths:xe}=v.current,fe=a.current.getBoundingClientRect(),ge=oe/fe.width*100,pe=Ds(ge,H,Y,re,v.current,_.current);xe.some((ve,me)=>ve!==pe[me])&&p(pe)},e[18]=n,e[19]=A):A=e[19];const $=A;let O,k;e[20]!==n||e[21]!==c||e[22]!==m?(O=()=>{v.current.elements=n,v.current.panels=c,v.current.widths=m},k=[n,c,m],e[20]=n,e[21]=c,e[22]=m,e[23]=O,e[24]=k):(O=e[23],k=e[24]),y.useLayoutEffect(O,k);const N=Is();let C,V;e[25]!==c||e[26]!==N?(C=()=>{const{widths:M}=v.current;if(M.length===c.length)return;const F=N.get(c);if(F){const ee=Ir(c,F,window.innerWidth);p(ee);return}const H=Os(c);p(H)},V=[N,c],e[25]=c,e[26]=N,e[27]=C,e[28]=V):(C=e[27],V=e[28]),y.useLayoutEffect(C,V);let W,q;e[29]!==c||e[30]!==N||e[31]!==m?(W=()=>{m.length&&N.setDebounced(c,m)},q=[N,c,m],e[29]=c,e[30]=N,e[31]=m,e[32]=W,e[33]=q):(W=e[32],q=e[33]),y.useEffect(W,q);let L,K;e[34]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{const M=new ResizeObserver(()=>{const{panels:F,widths:H}=v.current,ee=Ir(F,H,window.innerWidth);H.some((Y,re)=>Y!==ee[re])&&p(ee)});return M.observe(a.current),()=>{M.disconnect()}},K=[],e[34]=L,e[35]=K):(L=e[34],K=e[35]),y.useLayoutEffect(L,K);let J;e[36]!==h||e[37]!==$||e[38]!==w||e[39]!==g?(J={activeResizer:h,drag:$,getPanelStyle:w,registerElement:j,startDragging:g,stopDragging:U,unregisterElement:S},e[36]=h,e[37]=$,e[38]=w,e[39]=g,e[40]=J):J=e[40];const X=J;let B;e[41]!==r?(B=u.jsx(zs,{ref:a,children:r}),e[41]=r,e[42]=B):B=e[42];let te;return e[43]!==X||e[44]!==B?(te=u.jsx(yr.Provider,{value:X,children:B}),e[43]=X,e[44]=B,e[45]=te):te=e[45],te};function Sr(t){const e=z.c(37);let r,a,s,n,i;e[0]!==t?({children:r,message:a,onRetry:n,onContinueAnyway:s,...i}=t,e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=n,e[5]=i):(r=e[1],a=e[2],s=e[3],n=e[4],i=e[5]);const{t:o}=Ae(Ie);let c;e[6]!==o?(c=o("error-card.retry-button.text"),e[6]=o,e[7]=c):c=e[7];let l;e[8]!==n||e[9]!==c?(l=u.jsx(ze,{mode:"ghost",onClick:n,text:c}),e[8]=n,e[9]=c,e[10]=l):l=e[10];const m=l;let p;e[11]!==o?(p=o("error-card.continue-button.text"),e[11]=o,e[12]=p):p=e[12];let h;e[13]!==s||e[14]!==p?(h=u.jsx(ze,{mode:"ghost",tone:"critical",onClick:s,text:p}),e[13]=s,e[14]=p,e[15]=h):h=e[15];const d=h;let f;e[16]!==o?(f=o("error-card.title"),e[16]=o,e[17]=f):f=e[17];let v;e[18]!==f?(v=u.jsx(ie,{size:1,weight:"semibold",children:f}),e[18]=f,e[19]=v):v=e[19];let b;e[20]!==a?(b=u.jsx(ie,{muted:!0,size:1,children:a}),e[20]=a,e[21]=b):b=e[21];let w;e[22]!==v||e[23]!==b?(w=u.jsxs(qe,{space:3,children:[v,b]}),e[22]=v,e[23]=b,e[24]=w):w=e[24];let P;e[25]!==d||e[26]!==s||e[27]!==n||e[28]!==m?(P=n&&s?u.jsxs(ta,{space:2,children:[m,d]}):n?u.jsx(ye,{children:m}):s?u.jsx(ye,{children:d}):null,e[25]=d,e[26]=s,e[27]=n,e[28]=m,e[29]=P):P=e[29];let j;e[30]!==r||e[31]!==w||e[32]!==P?(j=u.jsx(ue,{align:"center",height:"fill",justify:"center",children:u.jsx(ra,{padding:4,sizing:"border",width:0,children:u.jsxs(qe,{space:4,children:[w,r,P]})})}),e[30]=r,e[31]=w,e[32]=P,e[33]=j):j=e[33];let x;return e[34]!==i||e[35]!==j?(x=u.jsx(he,{height:"fill",...i,children:j}),e[34]=i,e[35]=j,e[36]=x):x=e[36],x}const gn=y.forwardRef(function(t,e){const r=z.c(17);let a,s,n,i,o;if(r[0]!==t){const{childId:p,childType:h,childPayload:d,childParameters:f,searchParams:v,...b}=t;a=p,n=h,s=f,o=v,i=b,r[0]=t,r[1]=a,r[2]=s,r[3]=n,r[4]=i,r[5]=o}else a=r[1],s=r[2],n=r[3],i=r[4],o=r[5];let c;r[6]!==s||r[7]!==o?(c=Object.entries({...o,...s}),r[6]=s,r[7]=o,r[8]=c):c=r[8];let l;r[9]!==a||r[10]!==n||r[11]!==c?(l={id:a,type:n,_searchParams:c},r[9]=a,r[10]=n,r[11]=c,r[12]=l):l=r[12];let m;return r[13]!==e||r[14]!==i||r[15]!==l?(m=u.jsx(br,{...i,ref:e,state:l}),r[13]=e,r[14]=i,r[15]=l,r[16]=m):m=r[16],m}),Ns=y.forwardRef(function(t,e){const r=z.c(24);let a,s,n,i,o,c;r[0]!==t?({documentId:a,documentType:s,parentRefPath:n,template:c,searchParams:o,...i}=t,r[0]=t,r[1]=a,r[2]=s,r[3]=n,r[4]=i,r[5]=o,r[6]=c):(a=r[1],s=r[2],n=r[3],i=r[4],o=r[5],c=r[6]);let l;r[7]!==a?(l=Pt(a),r[7]=a,r[8]=l):l=r[8];const m=c?.params;let p;r[9]!==n?(p=na(n),r[9]=n,r[10]=p):p=r[10];let h;r[11]!==c?(h=c&&{template:c?.id},r[11]=c,r[12]=h):h=r[12];let d;r[13]!==p||r[14]!==h?(d={parentRefPath:p,...h},r[13]=p,r[14]=h,r[15]=d):d=r[15];let f;return r[16]!==s||r[17]!==e||r[18]!==i||r[19]!==o||r[20]!==l||r[21]!==m||r[22]!==d?(f=u.jsx(gn,{...i,ref:e,childId:l,childType:s,childPayload:m,childParameters:d,searchParams:o}),r[16]=s,r[17]=e,r[18]=i,r[19]=o,r[20]=l,r[21]=m,r[22]=d,r[23]=f):f=r[23],f});function Fs(t={}){const e=Object.entries(t).map(([r,a])=>`${r}=${a}`).join("&");return e.length?`?${e}`:""}function Vs(t){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],r=Object.entries(t).filter(([a])=>e.includes(a)).reduce((a,[s,n])=>n==null?a:{...a,[s]:n},{});return Fs(r)}const Bs=y.forwardRef(function(t,e){const r=z.c(9);let a,s;r[0]!==t?({searchParams:s,...a}=t,r[0]=t,r[1]=a,r[2]=s):(a=r[1],s=r[2]);let n;r[3]!==s?(n={type:void 0,_searchParams:Object.entries(s)},r[3]=s,r[4]=n):n=r[4];let i;return r[5]!==e||r[6]!==a||r[7]!==n?(i=u.jsx(br,{...a,ref:e,state:n,title:void 0}),r[5]=e,r[6]=a,r[7]=n,r[8]=i):i=r[8],i});function vn(t){const e=z.c(28),{children:r,onEditReference:a,onStructureParams:s,structureParams:n,searchParams:i,refs:o}=t,{state:c,resolvePathFromState:l}=bt();let m;e[0]!==c._searchParams?(m=Object.fromEntries(c._searchParams||[]),e[0]=c._searchParams,e[1]=m):m=e[1];const p=Hr(m);let h;e[2]!==l||e[3]!==p||e[4]!==c?(h=R=>{const g=l(c),T=Vs({...p,...R});return`${g}${T}`},e[2]=l,e[3]=p,e[4]=c,e[5]=h):h=e[5];const d=h;let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={},e[6]=f):f=e[6];const v=n;let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[7]=b):b=e[7];let w;e[8]!==o||e[9]!==i?(w=y.forwardRef(function(R,g){const{childId:T,...U}=R,A=o?.find($=>$._id===T||Pt($._id)===T);return A?u.jsx(gn,{...U,ref:g,childId:T,childType:A._type,searchParams:i}):(console.warn(`ChildLink: No document found for childId "${T}"`),null)}),e[8]=o,e[9]=i,e[10]=w):w=e[10];let P;e[11]!==i?(P=y.forwardRef(function(R,g){return u.jsx(Bs,{...R,ref:g,searchParams:i})}),e[11]=i,e[12]=P):P=e[12];let j;e[13]!==i?(j=y.forwardRef(function(R,g){return u.jsx(Ns,{...R,ref:g,searchParams:i})}),e[13]=i,e[14]=j):j=e[14];let x;e[15]!==a?(x=R=>{const{id:g,template:T,type:U,parentRefPath:A,version:$}=R;a({state:{id:g,type:U},params:{template:T.id,parentRefPath:Ta(A),version:$}})},e[15]=a,e[16]=x):x=e[16];let S;e[17]!==d||e[18]!==s||e[19]!==v||e[20]!==w||e[21]!==P||e[22]!==j||e[23]!==x?(S={index:0,groupIndex:0,siblingIndex:0,payload:f,params:v,hasGroupSiblings:!1,groupLength:1,routerPanesState:b,ChildLink:w,BackLink:P,ReferenceChildLink:j,ParameterizedLink:Ys,closeCurrentAndAfter:Js,handleEditReference:x,replaceCurrent:Xs,closeCurrent:Qs,duplicateCurrent:Gs,setView:qs,setParams:s,setPayload:Hs,navigateIntent:Ks,createPathWithParams:d},e[17]=d,e[18]=s,e[19]=v,e[20]=w,e[21]=P,e[22]=j,e[23]=x,e[24]=S):S=e[24];const E=S;let _;return e[25]!==r||e[26]!==E?(_=u.jsx(Ca.Provider,{value:E,children:r}),e[25]=r,e[26]=E,e[27]=_):_=e[27],_}function Ks(t,e,r){console.warn("navigateIntent",t,e,r)}function Hs(t){console.warn("setPayload",t)}function qs(t){console.warn("setView",t)}function Gs(t){console.warn("duplicateCurrent",t)}function Qs(){console.warn("closeCurrent")}function Xs(t){console.warn("replaceCurrent",t)}function Js(){console.warn("closeCurrentAndAfter")}function Ys(){throw new Error("ParameterizedLink not implemented")}const Zs=be(tn)`
  height: 100%;
`,ei=be(ue)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,ti=be(Mt)`
  white-space: pre-wrap;
`;function ri(t){const e=z.c(34),{mainDocumentState:r,onEditReference:a,onStructureParams:s,searchParams:n,refs:i}=t,{t:o}=Ae(Ie),{devMode:c}=vr();let l;if(e[0]!==r?.document?._id||e[1]!==i){let R;e[3]!==r?.document?._id?(R=g=>Pt(g._id)!==r?.document?._id,e[3]=r?.document?._id,e[4]=R):R=e[4],l=i.filter(R).map(ai),e[0]=r?.document?._id,e[1]=i,e[2]=l}else l=e[2];const m=l;let p;e[5]!==m?(p={filter:"_id in $ids",params:{ids:m}},e[5]=m,e[6]=p):p=e[6];let h;e[7]!==o?(h=o("document-list-pane.document-list.title"),e[7]=o,e[8]=h):h=e[8];let d;e[9]!==p||e[10]!==h?(d={id:"$root",options:p,schemaTypeName:"",title:h,type:"documentList"},e[9]=p,e[10]=h,e[11]=d):d=e[11];const f=d,[v,b]=y.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>b(null),e[12]=w):w=e[12];const P=w,[j]=y.useState(ni);let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=()=>b(null),e[13]=x):x=e[13];let S;if(e[14]!==i?(S=[i],e[14]=i,e[15]=S):S=e[15],y.useEffect(x,S),v){let R;e[16]!==o?(R=o("document-list-pane.error.text"),e[16]=o,e[17]=R):R=e[17];let g;e[18]!==c||e[19]!==v||e[20]!==o?(g=c&&u.jsx(he,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(qe,{space:3,children:[u.jsx($t,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(ti,{size:1,children:v.error.message})]})}),e[18]=c,e[19]=v,e[20]=o,e[21]=g):g=e[21];let T;return e[22]!==R||e[23]!==g?(T=u.jsx(Sr,{flex:1,message:R,onRetry:P,children:g}),e[22]=R,e[23]=g,e[24]=T):T=e[24],T}let E;e[25]!==f?(E=u.jsx(ei,{direction:"column",flex:1,children:u.jsx(Oa,{index:0,itemId:"$root",pane:f,paneKey:"$root"})}),e[25]=f,e[26]=E):E=e[26];let _;return e[27]!==a||e[28]!==s||e[29]!==i||e[30]!==n||e[31]!==j||e[32]!==E?(_=u.jsx(en,{onCatch:b,children:u.jsx(Zs,{children:u.jsx(Zr,{children:u.jsx(vn,{onEditReference:a,onStructureParams:s,structureParams:j,searchParams:n,refs:i,children:E})})})}),e[27]=a,e[28]=s,e[29]=i,e[30]=n,e[31]=j,e[32]=E,e[33]=_):_=e[33],_}function ni(){return{}}function ai(t){return Pt(t._id)}const si=be(Mt)`
  white-space: pre-wrap;
`;function ii(t){const e=z.c(40),{documentId:r,documentType:a,onFocusPath:s,onEditReference:n,onStructureParams:i,searchParams:o,structureParams:c}=t,{template:l,templateParams:m}=c,{t:p}=Ae(Ie),{devMode:h}=vr();let d;e[0]!==m?(d=Ra(m),e[0]=m,e[1]=d):d=e[1];let f;e[2]!==r||e[3]!==a||e[4]!==d||e[5]!==l?(f={id:r,type:a,template:l,templateParameters:d},e[2]=r,e[3]=a,e[4]=d,e[5]=l,e[6]=f):f=e[6];let v;e[7]!==r||e[8]!==f?(v={id:r,options:f,title:"",type:"document"},e[7]=r,e[8]=f,e[9]=v):v=e[9];const b=v;let w;e[10]!==r||e[11]!==a||e[12]!==s?(w=$=>s({id:r,type:a,path:Xr.toString($)}),e[10]=r,e[11]=a,e[12]=s,e[13]=w):w=e[13];const P=w,[j,x]=y.useState(null);let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=()=>x(null),e[14]=S):S=e[14];const E=S;let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{x(null)},e[15]=_):_=e[15];let R;if(e[16]!==r||e[17]!==a||e[18]!==c?(R=[r,a,c],e[16]=r,e[17]=a,e[18]=c,e[19]=R):R=e[19],y.useEffect(_,R),j){let $;e[20]!==p?($=p("document-pane.error.text"),e[20]=p,e[21]=$):$=e[21];let O;e[22]!==h||e[23]!==j||e[24]!==p?(O=h&&u.jsx(he,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(qe,{space:3,children:[u.jsx($t,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(si,{size:1,children:j.error.message})]})}),e[22]=h,e[23]=j,e[24]=p,e[25]=O):O=e[25];let k;return e[26]!==$||e[27]!==O?(k=u.jsx(Sr,{flex:1,message:$,onRetry:E,children:O}),e[26]=$,e[27]=O,e[28]=k):k=e[28],k}let g;e[29]===Symbol.for("react.memo_cache_sentinel")?(g={height:"100%"},e[29]=g):g=e[29];let T;e[30]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx(Nr,{}),e[30]=T):T=e[30];let U;e[31]!==P||e[32]!==b?(U=u.jsx(y.Suspense,{fallback:T,children:u.jsx(ka,{paneKey:"document",index:1,itemId:"document",pane:b,onFocusPath:P})}),e[31]=P,e[32]=b,e[33]=U):U=e[33];let A;return e[34]!==n||e[35]!==i||e[36]!==o||e[37]!==c||e[38]!==U?(A=u.jsx(en,{onCatch:x,children:u.jsx(tn,{style:g,children:u.jsx(vn,{searchParams:o,onEditReference:n,onStructureParams:i,structureParams:c,children:U})})}),e[34]=n,e[35]=i,e[36]=o,e[37]=c,e[38]=U,e[39]=A):A=e[39],A}function oi(t){const e=z.c(8),{documentId:r,documentType:a,onFocusPath:s,onEditReference:n,onStructureParams:i,searchParams:o,structureParams:c}=t;let l;return e[0]!==r||e[1]!==a||e[2]!==n||e[3]!==s||e[4]!==i||e[5]!==o||e[6]!==c?(l=u.jsx(Zr,{children:u.jsx(ii,{documentId:r,documentType:a,onEditReference:n,onFocusPath:s,onStructureParams:i,searchParams:o,structureParams:c})}),e[0]=r,e[1]=a,e[2]=n,e[3]=s,e[4]=i,e[5]=o,e[6]=c,e[7]=l):l=e[7],l}function ci(t,e){const r=z.c(7),a=Ea();let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s={},r[0]=s):s=r[0];const[n,i]=y.useState(s),{perspectiveStack:o}=qr();let c,l;return r[1]!==t||r[2]!==a||r[3]!==o||r[4]!==e?(c=()=>{if(!e)return;const m=Aa(a,e,t,o).subscribe(p=>{i(p)});return()=>{m?.unsubscribe()}},l=[a,e,t,o],r[1]=t,r[2]=a,r[3]=o,r[4]=e,r[5]=c,r[6]=l):(c=r[5],l=r[6]),y.useEffect(c,l),n}function li(t){const e=z.c(40),{documentId:r,documentType:a,mainDocumentState:s,onEditReference:n,onFocusPath:i,onStructureParams:o,refs:c,searchParams:l,structureParams:m}=t,{t:p}=Ae(Ie),h=da();let d;e[0]!==s?.document?._id||e[1]!==s?.document?._type||e[2]!==l?(d=_=>u.jsx(br,{..._,state:{id:s?.document?._id,type:s?.document?._type,_searchParams:Object.entries(l)}}),e[0]=s?.document?._id,e[1]=s?.document?._type,e[2]=l,e[3]=d):d=e[3];const f=d;let v;e[4]!==s?.document?._type||e[5]!==h?(v=h.get(s?.document?._type||"shoe"),e[4]=s?.document?._type,e[5]=h,e[6]=v):v=e[6];const b=v,w=ci(s?.document?._id||"",b);let P;e:{if(!s?.document){P=null;break e}let _;e[7]!==s.document||e[8]!==w.snapshot?(_=pa({snapshot:w.snapshot,fallback:s.document}),e[7]=s.document,e[8]=w.snapshot,e[9]=_):_=e[9];let R;e[10]!==p?(R=p("main-document.label"),e[10]=p,e[11]=R):R=e[11];let g;e[12]!==R?(g=u.jsx(he,{padding:1,radius:2,shadow:1,children:u.jsx(ie,{muted:!0,size:0,weight:"medium",children:R})}),e[12]=R,e[13]=g):g=e[13];let T;e[14]!==b||e[15]!==_||e[16]!==g?(T=u.jsx(ma,{..._,schemaType:b,status:g}),e[14]=b,e[15]=_,e[16]=g,e[17]=T):T=e[17],P=T}const j=P;if(r&&a){let _;return e[18]!==r||e[19]!==a||e[20]!==n||e[21]!==i||e[22]!==o||e[23]!==l||e[24]!==m?(_=u.jsx(oi,{documentId:r,documentType:a,onEditReference:n,onFocusPath:i,onStructureParams:o,searchParams:l,structureParams:m}),e[18]=r,e[19]=a,e[20]=n,e[21]=i,e[22]=o,e[23]=l,e[24]=m,e[25]=_):_=e[25],_}let x;e[26]!==f||e[27]!==s||e[28]!==j||e[29]!==p?(x=s&&u.jsx(he,{padding:3,tone:s.document?"inherit":"caution",children:s.document?u.jsx(ha,{__unstable_focusRing:!0,as:f,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:j}):u.jsx(he,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ue,{gap:3,children:[u.jsx(ye,{flex:"none",children:u.jsx(ie,{size:1,children:u.jsx(fa,{})})}),u.jsx(ye,{flex:1,children:u.jsx(ie,{size:1,children:u.jsx(wr,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:s.path}})})})]})})}),e[26]=f,e[27]=s,e[28]=j,e[29]=p,e[30]=x):x=e[30];let S;e[31]!==s||e[32]!==n||e[33]!==o||e[34]!==c||e[35]!==l?(S=u.jsx(ri,{mainDocumentState:s,onEditReference:n,onStructureParams:o,searchParams:l,refs:c}),e[31]=s,e[32]=n,e[33]=o,e[34]=c,e[35]=l,e[36]=S):S=e[36];let E;return e[37]!==x||e[38]!==S?(E=u.jsxs(ue,{direction:"column",flex:1,height:"fill",children:[x,S]}),e[37]=x,e[38]=S,e[39]=E):E=e[39],E}function ui(t){const e=z.c(2);let r;e[0]!==t?(r=()=>t||us(),e[0]=t,e[1]=r):r=e[1];const[a]=y.useState(r);return a}const di=be.div`
  position: relative;
`,pi=be.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:t})=>t?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:t})=>!t&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,wn=function(t){const e=z.c(27),{id:r,order:a,disabled:s}=t,n=s===void 0?!1:s,i=y.useRef(null),o=y.useContext(yr);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=ui(r),{activeResizer:l,drag:m,startDragging:p,stopDragging:h,registerElement:d,unregisterElement:f}=o,v=l===c;if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");let b;e[0]!==c||e[1]!==p?(b=O=>{p(c,O.nativeEvent)},e[0]=c,e[1]=p,e[2]=b):b=e[2];const w=b;let P;e[3]!==m||e[4]!==c?(P=O=>{m(c,O)},e[3]=m,e[4]=c,e[5]=P):P=e[5];const j=P;let x;e[6]!==h?(x=()=>{i.current.blur(),h()},e[6]=h,e[7]=x):x=e[7];const S=x;let E,_;e[8]!==n||e[9]!==v||e[10]!==j||e[11]!==S?(E=()=>{if(!v||n)return;const O=(function(){const k=document.body.style,N=document.documentElement.style,{cursor:C}=N,{userSelect:V}=k;return N.cursor="ew-resize",k.userSelect="none",()=>{C?N.cursor=C:N.removeProperty("cursor"),V?k.userSelect=V:k.removeProperty("user-select")}})();return window.addEventListener("mousemove",j),window.addEventListener("mouseup",S),window.addEventListener("contextmenu",S),()=>{O(),window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",S),window.removeEventListener("contextmenu",S)}},_=[n,v,j,S],e[8]=n,e[9]=v,e[10]=j,e[11]=S,e[12]=E,e[13]=_):(E=e[12],_=e[13]),y.useEffect(E,_);let R,g;e[14]!==c||e[15]!==a||e[16]!==d||e[17]!==f?(R=()=>(d(c,{id:c,order:a,type:"resizer",el:i}),()=>{f(c)}),g=[c,a,d,f],e[14]=c,e[15]=a,e[16]=d,e[17]=f,e[18]=R,e[19]=g):(R=e[18],g=e[19]),y.useLayoutEffect(R,g);let T,U;e[20]===Symbol.for("react.memo_cache_sentinel")?(U=u.jsx("span",{}),T=u.jsx("span",{}),e[20]=T,e[21]=U):(T=e[20],U=e[21]);let A;e[22]!==n?(A=u.jsxs(pi,{$disabled:n,children:[U,T]}),e[22]=n,e[23]=A):A=e[23];let $;return e[24]!==w||e[25]!==A?($=u.jsx(di,{onMouseDown:w,ref:i,children:A}),e[24]=w,e[25]=A,e[26]=$):$=e[26],$},mi=t=>{const e=z.c(8),{documentId:r,setDisplayedDocument:a,getCommentIntent:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(wn,{order:4}),e[0]=n):n=e[0];let i;e[1]!==s||e[2]!==t.children?(i=u.jsx(Jn,{getIntent:s,children:t.children}),e[1]=s,e[2]=t.children,e[3]=i):i=e[3];let o;return e[4]!==r||e[5]!==a||e[6]!==i?(o=u.jsxs(u.Fragment,{children:[n,u.jsx(Pr,{id:"content",minWidth:325,order:5,children:u.jsx(za,{documentId:r,setDisplayedDocument:a,children:i})})]}),e[4]=r,e[5]=a,e[6]=i,e[7]=o):o=e[7],o},hi=t=>{const e=z.c(15),{documentId:r,documentsOnPage:a,documentType:s,getCommentIntent:n,mainDocumentState:i,onEditReference:o,onFocusPath:c,onStructureParams:l,searchParams:m,setDisplayedDocument:p,structureParams:h}=t;let d;e[0]!==r||e[1]!==s||e[2]!==a||e[3]!==i||e[4]!==o||e[5]!==c||e[6]!==l||e[7]!==m||e[8]!==h?(d=u.jsx(li,{documentId:r,documentType:s,mainDocumentState:i,onEditReference:o,onFocusPath:c,onStructureParams:l,refs:a,searchParams:m,structureParams:h}),e[0]=r,e[1]=s,e[2]=a,e[3]=i,e[4]=o,e[5]=c,e[6]=l,e[7]=m,e[8]=h,e[9]=d):d=e[9];let f;return e[10]!==r||e[11]!==n||e[12]!==p||e[13]!==d?(f=u.jsx(mi,{documentId:r,getCommentIntent:n,setDisplayedDocument:p,children:d}),e[10]=r,e[11]=n,e[12]=p,e[13]=d,e[14]=f):f=e[14],f},fi=function(t){const e=z.c(5),{children:r,navigate:a}=t;let s;e[0]!==a?(s=(o,c)=>{if(o||c){const l={};o&&(l.params={preview:o}),c&&(l.state=c),a(l)}},e[0]=a,e[1]=s):s=e[1];const n=s;let i;return e[2]!==r||e[3]!==n?(i=u.jsx(_a.Provider,{value:n,children:r}),e[2]=r,e[3]=n,e[4]=i):i=e[4],i};function gi(t,e){const r=z.c(9);let a;r[0]!==e||r[1]!==t?(a=()=>JSON.parse(localStorage.getItem(t)??JSON.stringify(e)),r[0]=e,r[1]=t,r[2]=a):a=r[2];const[s,n]=y.useState(a);let i,o;r[3]!==t||r[4]!==s?(i=()=>{localStorage.setItem(t,JSON.stringify(s))},o=[t,s],r[3]=t,r[4]=s,r[5]=i,r[6]=o):(i=r[5],o=r[6]),y.useEffect(i,o);let c;return r[7]!==s?(c=[s,n],r[7]=s,r[8]=c):c=r[8],c}function vi(t){const e=z.c(11),{unstable_navigator:r}=t,a=!!r?.component,[s,n]=gi("presentation/navigator",a),i=a?s:!1;let o;e:{if(!a){o=void 0;break e}let d;e[0]!==n?(d=()=>n(wi),e[0]=n,e[1]=d):d=e[1],o=d}const c=o;let l;e[2]!==i||e[3]!==r?(l=function(){return u.jsx(u.Fragment,{children:i&&u.jsx(bi,{...r})})},e[2]=i,e[3]=r,e[4]=l):l=e[4];const m=l;let p;e[5]!==i||e[6]!==c?(p={navigatorEnabled:i,toggleNavigator:c},e[5]=i,e[6]=c,e[7]=p):p=e[7];let h;return e[8]!==m||e[9]!==p?(h=[p,m],e[8]=m,e[9]=p,e[10]=h):h=e[10],h}function wi(t){return!t}function yi(t){const e=z.c(11),{minWidth:r,maxWidth:a,component:s}=t,n=r!=null&&a!=null&&r===a;let i;e[0]!==s?(i=u.jsx(s,{}),e[0]=s,e[1]=i):i=e[1];let o;e[2]!==a||e[3]!==r||e[4]!==i?(o=u.jsx(Pr,{id:"navigator",minWidth:r,maxWidth:a,order:1,children:i}),e[2]=a,e[3]=r,e[4]=i,e[5]=o):o=e[5];let c;e[6]!==n?(c=u.jsx(wn,{order:2,disabled:n}),e[6]=n,e[7]=c):c=e[7];let l;return e[8]!==o||e[9]!==c?(l=u.jsxs(u.Fragment,{children:[o,c]}),e[8]=o,e[9]=c,e[10]=l):l=e[10],l}const bi=y.memo(yi),xi=function(t){const e=z.c(3),{children:r,params:a}=t,s=a;let n;return e[0]!==r||e[1]!==s?(n=u.jsx(Sa.Provider,{value:s,children:r}),e[0]=r,e[1]=s,e[2]=n):n=e[2],n},Pi=function(t){const e=z.c(10),{children:r,devMode:a,name:s,navigate:n,params:i,searchParams:o,structureParams:c}=t;let l;e[0]!==a||e[1]!==s||e[2]!==n||e[3]!==i||e[4]!==o||e[5]!==c?(l={devMode:a,name:s,navigate:n,params:i,searchParams:o,structureParams:c},e[0]=a,e[1]=s,e[2]=n,e[3]=i,e[4]=o,e[5]=c,e[6]=l):l=e[6];const m=l;let p;return e[7]!==r||e[8]!==m?(p=u.jsx(ja.Provider,{value:m,children:r}),e[7]=r,e[8]=m,e[9]=p):p=e[9],p};function _r(t){const e=se(t,Si);if(!Array.isArray(e))throw new TypeError("allowPatterns must be an array");return e}function Si(t){return t.context.allowOrigins}function ht(t){return Array.isArray(t)?t.join(","):t}function yn(){const t=z.c(2),e=y.useId();let r;return t[0]!==e?(r=e.startsWith(":")?e.replace(/^:(.+):$/,"«$1»"):e,t[0]=e,t[1]=r):r=t[1],r}const _i=y.forwardRef(function(t,e){const r=z.c(19),{animate:a,initial:s,onLoad:n,preventClick:i,src:o,variants:c,style:l}=t,m=y.useRef(null);let p;r[0]===Symbol.for("react.memo_cache_sentinel")?(p=()=>m.current,r[0]=p):p=r[0],y.useImperativeHandle(e,p);let h,d;r[1]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{if(!m.current)return;const x=m.current,S=function(){x===document.activeElement&&x.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))};return window.addEventListener("blur",S),()=>{window.removeEventListener("blur",S)}},d=[],r[1]=h,r[2]=d):(h=r[1],d=r[2]),y.useEffect(h,d);const f=yn();let v;r[3]!==l||r[4]!==f?(v={...l,viewTransitionName:f},r[3]=l,r[4]=f,r[5]=v):v=r[5];let b;r[6]!==a||r[7]!==s||r[8]!==n||r[9]!==o||r[10]!==v||r[11]!==c?(b=u.jsx(ji,{style:v,animate:a,initial:s,onLoad:n,ref:m,src:o,variants:c}),r[6]=a,r[7]=s,r[8]=n,r[9]=o,r[10]=v,r[11]=c,r[12]=b):b=r[12];let w;r[13]!==i?(w=i&&u.jsx(Ei,{}),r[13]=i,r[14]=w):w=r[14];let P;r[15]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(Ri,{}),r[15]=P):P=r[15];let j;return r[16]!==b||r[17]!==w?(j=u.jsxs(u.Fragment,{children:[b,w,P]}),r[16]=b,r[17]=w,r[18]=j):j=r[18],j}),ji=xt.create(be.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Ei=be(ye)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Ri=aa`
html:active-view-transition-type(sanity-iframe-viewport) {
  view-transition-name: none;
  &::view-transition {
    pointer-events: none;
  }
  /* &::view-transition-old(root) {
    display: none;
  }
  &::view-transition-new(root) {
    animation: none;
  } */
}
`;function Ci(t){const e=z.c(21),{openPopup:r,previewLocationOrigin:a,previewLocationRoute:s,perspective:n,targetOrigin:i}=t;let o;e[0]!==n||e[1]!==a||e[2]!==s||e[3]!==i?(o=new URL(s,a||i),o.searchParams.set(mt,ht(n)),e[0]=n,e[1]=a,e[2]=s,e[3]=i,e[4]=o):o=e[4];const{pathname:c,search:l}=o,m=`${a}${c}${l}`,{t:p}=Ae(Ie);let h;e[5]!==r?(h=x=>{x.preventDefault(),r(x.currentTarget.href)},e[5]=r,e[6]=h):h=e[6];const d=h;let f;e[7]!==p?(f=p("share-url.menu-item.open.text"),e[7]=p,e[8]=f):f=e[8];let v;e[9]!==f?(v=u.jsx(ie,{size:1,children:f}),e[9]=f,e[10]=v):v=e[10];let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=["bottom-start"],e[11]=b):b=e[11];let w;e[12]!==p?(w=p("share-url.menu-item.open.text"),e[12]=p,e[13]=w):w=e[13];let P;e[14]!==d||e[15]!==m||e[16]!==w?(P=u.jsx(ze,{as:"a","aria-label":w,icon:Ia,mode:"bleed",href:m,rel:"opener",target:"_blank",tooltipProps:null,onClick:d}),e[14]=d,e[15]=m,e[16]=w,e[17]=P):P=e[17];let j;return e[18]!==v||e[19]!==P?(j=u.jsx(wt,{animate:!0,content:v,fallbackPlacements:b,placement:"bottom",portal:!0,children:P}),e[18]=v,e[19]=P,e[20]=j):j=e[20],j}function bn(t){const e=se(t,Ti);if(!e)throw new TypeError("targetOrigin is required");return e}function Ti(t){return t.context.previewUrl?.origin}function ki(t){const e=z.c(32),{fontSize:r,onChange:a,padding:s,prefix:n,suffix:i,value:o,previewUrlRef:c}=t,l=r===void 0?1:r,m=s===void 0?3:s,p=_r(c),h=bn(c),{t:d}=Ae(Ie),{basePath:f}=Vr()?.activeWorkspace||{},v=f===void 0?"/":f,b=y.useRef(null),[w,P]=y.useState(void 0),[j,x]=y.useState(void 0);let S;e[0]===Symbol.for("react.memo_cache_sentinel")?(S=q=>{P(q.currentTarget.value)},e[0]=S):S=e[0];const E=S;let _;e[1]!==p||e[2]!==v||e[3]!==a||e[4]!==w||e[5]!==d||e[6]!==h?(_=q=>{if(q.key==="Enter"){if(w===void 0)return;let L=w;try{L=new URL(w,h).toString()}catch{}if(Array.isArray(p)){if(!p.some(J=>J.test(L))){x(d("preview-location-input.error",{origin:h,context:"origin-not-allowed"})),q.currentTarget.reportValidity();return}}else if(!h&&(L.startsWith(`${v}/`)||L===v)){x(d("preview-location-input.error",{basePath:v,context:"same-base-path"}));return}const K=L===h?`${h}/`:L;x(void 0),P(void 0),a(K),b.current?.blur()}q.key==="Escape"&&(x(void 0),P(void 0))},e[1]=p,e[2]=v,e[3]=a,e[4]=w,e[5]=d,e[6]=h,e[7]=_):_=e[7];const R=_;let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{x(void 0),P(void 0)},e[8]=g):g=e[8];const T=g;let U;e[9]!==h||e[10]!==o?(U=()=>{x(void 0);let q=o;try{q=new URL(o,h).toString()}catch{}P(q)},e[9]=h,e[10]=o,e[11]=U):U=e[11];const A=U;let $;e[12]===Symbol.for("react.memo_cache_sentinel")?($=()=>{x(void 0),P(void 0)},e[12]=$):$=e[12];let O;e[13]!==h||e[14]!==o?(O=[h,o],e[13]=h,e[14]=o,e[15]=O):O=e[15],y.useEffect($,O);let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k={icon:Ua},e[16]=k):k=e[16];const N=j?k:void 0;let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C={zIndex:1},e[17]=C):C=e[17];let V;e[18]!==w||e[19]!==h||e[20]!==o?(V=w===void 0?new URL(o,h).toString():w,e[18]=w,e[19]=h,e[20]=o,e[21]=V):V=e[21];let W;return e[22]!==j||e[23]!==l||e[24]!==A||e[25]!==R||e[26]!==m||e[27]!==n||e[28]!==i||e[29]!==N||e[30]!==V?(W=u.jsx(u.Fragment,{children:u.jsx(ga,{clearButton:N,customValidity:j,fontSize:l,onBlur:T,onClear:A,onChange:E,onKeyDownCapture:R,padding:m,prefix:n,style:C,radius:2,ref:b,space:m,suffix:i,value:V})}),e[22]=j,e[23]=l,e[24]=A,e[25]=R,e[26]=m,e[27]=n,e[28]=i,e[29]=N,e[30]=V,e[31]=W):W=e[31],W}const Ai=y.lazy(()=>We(()=>import("./QRCodeSVG-Dtg20FVT.js"),__vite__mapDeps([0,1]))),cr=24,Ii=16,Ui=224,$i=be($a)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${cr}px;
  width: ${cr}px;
`,Mi=xt.create(Ut),Di=xt.create(ie),Li=xt.create($i);function Oi(t){const e=z.c(47),{canToggleSharePreviewAccess:r,canUseSharedPreviewAccess:a,initialUrl:s,previewLocationRoute:n,perspective:i}=t,{t:o}=Ae(Ie),{push:c}=Ot();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={apiVersion:zt},e[0]=l):l=e[0];const m=Lt(l),p=Fr(),[h,d]=y.useState(!0),[f,v]=y.useState(!1),[b,w]=y.useState(!1),[P,j]=y.useState(null),x=f||b||h;let S;e[1]!==s||e[2]!==i||e[3]!==n||e[4]!==P?(S=P?ps(s,P,n,ht(i)):null,e[1]=s,e[2]=i,e[3]=n,e[4]=P,e[5]=S):S=e[5];const E=S,[_,R]=y.useState(null);if(_)throw _;let g;e[6]!==c||e[7]!==o?(g=()=>{c({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},e[6]=c,e[7]=o,e[8]=g):g=e[8];const T=g;let U;e[9]!==m||e[10]!==p?.id?(U=async()=>{const M=async()=>{w(!0),await hs(m,"sanity/presentation",typeof window>"u"?"":location.href,p?.id),j(null)};try{await M()}catch(F){R(F)}w(!1)},e[9]=m,e[10]=p?.id,e[11]=U):U=e[11];const A=U;let $;e[12]!==m||e[13]!==p?.id?($=async()=>{const M=async()=>{v(!0);const F=await ms(m,"sanity/presentation",typeof window>"u"?"":location.href,p?.id);j(F.secret)};try{await M()}catch(F){R(F)}v(!1)},e[12]=m,e[13]=p?.id,e[14]=$):$=e[14];const O=$;let k;e[15]!==c||e[16]!==o||e[17]!==E?(k=async()=>{const M=async()=>{if(!E)throw new Error("No URL to copy");await navigator.clipboard.writeText(E.toString()),c({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})};try{await M()}catch(F){R(F)}},e[15]=c,e[16]=o,e[17]=E,e[18]=k):k=e[18];const N=k;let C,V;e[19]!==m?(C=()=>{let M=new AbortController,F=[];const H=async function(Y,re){const{result:I,syncTags:G}=await m.fetch(Yr,{},{filterResponse:!1,lastLiveEventId:Y,tag:"presentation.fetch-shared-access-secret"});Array.isArray(G)&&(F=G),re.aborted||j(I)},ee=m.live.events().subscribe({next:Y=>{Y.type==="message"&&(M.abort(),M=new AbortController,Y.tags.some(re=>F.includes(re))&&H(Y.id,M.signal))},error:R});return H(null,M.signal).finally(()=>d(!1)),()=>{ee.unsubscribe(),M.abort()}},V=[m],e[19]=m,e[20]=C,e[21]=V):(C=e[20],V=e[21]),y.useEffect(C,V);let W;e[22]!==o?(W=o("preview-frame.share-button.aria-label"),e[22]=o,e[23]=W):W=e[23];let q;e[24]!==W?(q=u.jsx(ze,{"aria-label":W,icon:Ma,mode:"bleed",tooltipProps:null}),e[24]=W,e[25]=q):q=e[25];let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L={maxWidth:248},e[26]=L):L=e[26];const K=a?void 0:0;let J;e[27]!==x||e[28]!==r||e[29]!==a||e[30]!==b||e[31]!==f||e[32]!==N||e[33]!==A||e[34]!==O||e[35]!==T||e[36]!==h||e[37]!==o||e[38]!==E?(J=a?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(va,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(wt,{animate:!0,content:u.jsx(ie,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:E?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(Jr,{checked:f||E!==null&&!b,readOnly:f||b,indeterminate:h,onChange:r?E?A:O:T})}),u.jsx(ie,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(ie,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(ye,{padding:3,paddingTop:2,children:u.jsxs(qe,{space:3,children:[u.jsx(he,{tone:x||!E?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Qr,{children:x?u.jsx(Mi,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):E?u.jsx(u.Fragment,{children:u.jsxs(y.Suspense,{fallback:u.jsx(Ut,{}),children:[u.jsx(Ai,{title:o("share-preview-menu.qr-code.title",{url:E.toString()}),value:E.toString(),size:Ui,color:"var(--card-fg-color)",logoSize:cr+Ii}),u.jsx(Li,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Di,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(ie,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(wa,{}),u.jsx(ya,{disabled:!E||b,icon:ba,onClick:N,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(he,{padding:2,tone:"caution",radius:3,children:u.jsx(ie,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})}),e[27]=x,e[28]=r,e[29]=a,e[30]=b,e[31]=f,e[32]=N,e[33]=A,e[34]=O,e[35]=T,e[36]=h,e[37]=o,e[38]=E,e[39]=J):J=e[39];let X;e[40]!==K||e[41]!==J?(X=u.jsx(Da,{style:L,padding:K,children:J}),e[40]=K,e[41]=J,e[42]=X):X=e[42];let B;e[43]===Symbol.for("react.memo_cache_sentinel")?(B={constrainSize:!0,placement:"bottom",portal:!0},e[43]=B):B=e[43];let te;return e[44]!==X||e[45]!==q?(te=u.jsx(xa,{button:q,id:"share-menu",menu:X,popover:B}),e[44]=X,e[45]=q,e[46]=te):te=e[46],te}const zi=t=>{const e=z.c(110),{canSharePreviewAccess:r,canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:s,iframeRef:n,initialUrl:i,navigatorEnabled:o,onPathChange:c,onRefresh:l,openPopup:m,overlaysConnection:p,presentationRef:h,perspective:d,previewUrl:f,setViewport:v,targetOrigin:b,toggleNavigator:w,toggleOverlay:P,viewport:j,previewUrlRef:x}=t,{t:S}=Ae(Ie);let E;e[0]!==v||e[1]!==j?(E=()=>v(j==="desktop"?"mobile":"desktop"),e[0]=v,e[1]=j,e[2]=E):E=e[2];const _=E,R=b===location.origin?"":b;let g;e[3]!==n||e[4]!==l||e[5]!==h||e[6]!==f||e[7]!==b?(g=()=>{l(()=>{n.current&&(h.send({type:"iframe reload"}),Object.assign(n.current,{src:new URL(f||"/",b).toString()}))})},e[3]=n,e[4]=l,e[5]=h,e[6]=f,e[7]=b,e[8]=g):g=e[8];const T=g,U=se(h,Fi),A=se(h,Vi),$=se(h,Bi),O=se(h,Ki),k=se(h,Hi);let N;if(e[9]!==f||e[10]!==b){const ft=new URL(f||"/",b);N=ds(ft),e[9]=f,e[10]=b,e[11]=N}else N=e[11];const{pathname:C,search:V}=N,W=`${C}${V}`,q=yn(),L=se(x,qi);let K;e[12]===Symbol.for("react.memo_cache_sentinel")?(K={width:"100%"},e[12]=K):K=e[12];let J;e[13]!==o||e[14]!==S||e[15]!==w?(J=w&&u.jsx(ze,{"aria-label":S("preview-frame.navigator.toggle-button.aria-label"),icon:Yn,mode:"bleed",onClick:w,selected:o,tooltipProps:{content:u.jsx(ie,{size:1,children:S("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[13]=o,e[14]=S,e[15]=w,e[16]=J):J=e[16];let X;e[17]===Symbol.for("react.memo_cache_sentinel")?(X={whiteSpace:"nowrap"},e[17]=X):X=e[17];const B=k?"disable":"enable";let te;e[18]!==S||e[19]!==B?(te=S("preview-frame.overlay.toggle-button.tooltip",{context:B}),e[18]=S,e[19]=B,e[20]=te):te=e[20];let M;e[21]!==te?(M=u.jsx(ye,{padding:1,children:u.jsx(ie,{size:1,children:te})}),e[21]=te,e[22]=M):M=e[22];let F;e[23]===Symbol.for("react.memo_cache_sentinel")?(F=u.jsx(ye,{paddingY:1,children:u.jsx(sa,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[23]=F):F=e[23];let H;e[24]!==M?(H=u.jsxs(ue,{align:"center",style:X,children:[M,F]}),e[24]=M,e[25]=H):H=e[25];let ee;e[26]===Symbol.for("react.memo_cache_sentinel")?(ee=["bottom-start"],e[26]=ee):ee=e[26];let Y;e[27]===Symbol.for("react.memo_cache_sentinel")?(Y={lineHeight:0,borderRadius:999,userSelect:"none"},e[27]=Y):Y=e[27];const re=k?"transparent":void 0;let I;e[28]===Symbol.for("react.memo_cache_sentinel")?(I={margin:-4},e[28]=I):I=e[28];const G=!A,Q=U||p!=="connected";let oe;e[29]!==k||e[30]!==G||e[31]!==Q||e[32]!==P?(oe=u.jsx("div",{style:I,children:u.jsx(Jr,{indeterminate:G,checked:k,onChange:P,disabled:Q})}),e[29]=k,e[30]=G,e[31]=Q,e[32]=P,e[33]=oe):oe=e[33];const xe=!k;let fe;e[34]!==S?(fe=S("preview-frame.overlay.toggle-button.text"),e[34]=S,e[35]=fe):fe=e[35];let ge;e[36]!==xe||e[37]!==fe?(ge=u.jsx(ye,{children:u.jsx(ie,{muted:xe,size:1,weight:"medium",children:fe})}),e[36]=xe,e[37]=fe,e[38]=ge):ge=e[38];let pe;e[39]!==oe||e[40]!==ge?(pe=u.jsxs(ue,{align:"center",gap:3,children:[oe,ge]}),e[39]=oe,e[40]=ge,e[41]=pe):pe=e[41];let ve;e[42]!==re||e[43]!==pe?(ve=u.jsx(he,{as:"label",flex:"none",padding:3,marginX:1,style:Y,tone:re,children:pe}),e[42]=re,e[43]=pe,e[44]=ve):ve=e[44];let me;e[45]!==H||e[46]!==ve?(me=u.jsx(wt,{animate:!0,content:H,fallbackPlacements:ee,placement:"bottom",portal:!0,children:ve}),e[45]=H,e[46]=ve,e[47]=me):me=e[47];let De;e[48]!==A||e[49]!==U||e[50]!==$||e[51]!==O||e[52]!==S?(De=A?S("preview-frame.refresh-button.tooltip"):S("preview-frame.status",{context:U?"loading":$?"refreshing":O?"reloading":"unknown"}),e[48]=A,e[49]=U,e[50]=$,e[51]=O,e[52]=S,e[53]=De):De=e[53];let Pe;e[54]!==De?(Pe=u.jsx(ie,{size:1,children:De}),e[54]=De,e[55]=Pe):Pe=e[55];let Le;e[56]===Symbol.for("react.memo_cache_sentinel")?(Le=["bottom-end"],e[56]=Le):Le=e[56];let Se;e[57]!==S?(Se=S("preview-frame.refresh-button.aria-label"),e[57]=S,e[58]=Se):Se=e[58];const Ne=O||$||L;let _e;e[59]!==T||e[60]!==Se||e[61]!==Ne?(_e=u.jsx(ze,{"aria-label":Se,icon:ia,mode:"bleed",loading:Ne,onClick:T,tooltipProps:null}),e[59]=T,e[60]=Se,e[61]=Ne,e[62]=_e):_e=e[62];let Ue;e[63]!==Pe||e[64]!==_e?(Ue=u.jsx(ye,{padding:1,children:u.jsx(wt,{animate:!0,content:Pe,fallbackPlacements:Le,placement:"bottom",portal:!0,children:_e})}),e[63]=Pe,e[64]=_e,e[65]=Ue):Ue=e[65];let je;e[66]!==m||e[67]!==d||e[68]!==R||e[69]!==W||e[70]!==b?(je=u.jsx(ye,{padding:1,children:u.jsx(Ci,{openPopup:m,previewLocationOrigin:R,previewLocationRoute:W,perspective:d,targetOrigin:b})}),e[66]=m,e[67]=d,e[68]=R,e[69]=W,e[70]=b,e[71]=je):je=e[71];let $e;e[72]!==c||e[73]!==W||e[74]!==x||e[75]!==Ue||e[76]!==je?($e=u.jsx(ye,{flex:1,children:u.jsx(ki,{previewUrlRef:x,prefix:Ue,onChange:c,suffix:je,value:W})}),e[72]=c,e[73]=W,e[74]=x,e[75]=Ue,e[76]=je,e[77]=$e):$e=e[77];let Ee;e[78]!==q?(Ee=ft=>{ft?.style.setProperty("view-transition-name",q)},e[78]=q,e[79]=Ee):Ee=e[79];const Ke=j==="desktop"?"narrow":"full";let Re;e[80]!==S||e[81]!==Ke?(Re=S("preview-frame.viewport-button.tooltip",{context:Ke}),e[80]=S,e[81]=Ke,e[82]=Re):Re=e[82];let Me;e[83]!==Re?(Me=u.jsx(ie,{size:1,children:Re}),e[83]=Re,e[84]=Me):Me=e[84];let Oe;e[85]===Symbol.for("react.memo_cache_sentinel")?(Oe=["bottom-start"],e[85]=Oe):Oe=e[85];let Ce;e[86]!==S?(Ce=S("preview-frame.viewport-button.aria-label"),e[86]=S,e[87]=Ce):Ce=e[87];const Fe=j==="desktop"?Zn:ea;let Te;e[88]!==Ce||e[89]!==Fe||e[90]!==_||e[91]!==j?(Te=u.jsx(ze,{"data-testid":"preview-viewport-toggle","data-viewport":j,"aria-label":Ce,icon:Fe,mode:"bleed",onClick:_,tooltipProps:null}),e[88]=Ce,e[89]=Fe,e[90]=_,e[91]=j,e[92]=Te):Te=e[92];let ke;e[93]!==Ee||e[94]!==Me||e[95]!==Te?(ke=u.jsx(ue,{align:"center",flex:"none",gap:1,children:u.jsx(wt,{animate:!0,ref:Ee,content:Me,fallbackPlacements:Oe,placement:"bottom",portal:!0,children:Te})}),e[93]=Ee,e[94]=Me,e[95]=Te,e[96]=ke):ke=e[96];let de;e[97]!==r||e[98]!==a||e[99]!==s||e[100]!==i||e[101]!==d||e[102]!==W?(de=r&&u.jsx(ue,{align:"center",flex:"none",gap:1,children:u.jsx(Oi,{canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:s,previewLocationRoute:W,initialUrl:i,perspective:d})}),e[97]=r,e[98]=a,e[99]=s,e[100]=i,e[101]=d,e[102]=W,e[103]=de):de=e[103];let Ve;return e[104]!==me||e[105]!==$e||e[106]!==J||e[107]!==ke||e[108]!==de?(Ve=u.jsxs(ue,{align:"center",gap:1,paddingX:1,style:K,children:[J,me,$e,ke,de]}),e[104]=me,e[105]=$e,e[106]=J,e[107]=ke,e[108]=de,e[109]=Ve):Ve=e[109],Ve};function Wi(t){const e=z.c(7),r=Ni,a=t.options?.component;let s;e[0]!==a||e[1]!==t?(s=a?u.jsx(a,{...t,renderDefault:r}):r(t),e[0]=a,e[1]=t,e[2]=s):s=e[2];const n=s;let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={position:"relative"},e[3]=i):i=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={minHeight:0},e[4]=o):o=e[4];let c;return e[5]!==n?(c=u.jsx(he,{flex:"none",padding:2,borderBottom:!0,style:i,children:u.jsx(ue,{align:"center",style:o,children:n})}),e[5]=n,e[6]=c):c=e[6],c}function Ni(t){return u.jsx(zi,{...t})}function Fi(t){return t.matches("loading")}function Vi(t){return t.matches("loaded")}function Bi(t){return t.matches({loaded:"refreshing"})}function Ki(t){return t.matches({loaded:"reloading"})}function Hi(t){return t.context.visualEditingOverlaysEnabled}function qi(t){return t.hasTag("busy")}const Zt=xt.create(ue),xn=y.memo(y.forwardRef(function(t,e){const{header:r,initialUrl:a,loadersConnection:s,overlaysConnection:n,perspective:i,viewport:o,vercelProtectionBypass:c,presentationRef:l,previewUrlRef:m}=t,[p,h]=y.useState(null),d=ht(p===null?i:p),f=y.useMemo(()=>{const I=new URL(a);return I.searchParams.get(mt)||I.searchParams.set(mt,d),(c||I.searchParams.get(vt))&&I.searchParams.set(mr,"samesitenone"),c&&!I.searchParams.get(vt)&&I.searchParams.set(vt,c),I},[a,d,c]);y.useEffect(()=>{s==="connected"&&h(I=>I===null?i:I)},[s,i]);const{t:v}=Ae(Ie),{devMode:b}=vr(),w=qn(),P=y.useRef(null),j=u.jsx(Wi,{...t,iframeRef:P,options:r});y.useImperativeHandle(e,()=>P.current);const x=se(l,I=>I.matches("loading")||I.matches({loaded:"reloading"})),[S,E]=y.useState(!1),_=se(l,I=>I.matches({loaded:"refreshing"})),[R,g]=y.useState(!1),T=x||_||n==="connecting",U=y.useCallback(()=>{P.current&&(P.current.src=f.toString(),l.send({type:"iframe reload"}))},[l,f]),[A,$]=y.useState(!1),O=y.useCallback(()=>{$(!0)},[]),[k,N]=y.useState(!1);y.useEffect(()=>{if(!(x||_)&&(n==="connecting"||n==="reconnecting")){const I=setTimeout(()=>{N(!0)},5e3);return()=>clearTimeout(I)}},[n,x,_]),y.useEffect(()=>{if(!(x||_||!k)){if(n==="connected"&&(g(!1),N(!1),E(!1),$(!1)),n==="connecting"){const I=setTimeout(()=>{E(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Er);return()=>clearTimeout(I)}if(n==="reconnecting"){const I=setTimeout(()=>{E(!0),g(!0)},Er);return()=>clearTimeout(I)}}},[x,n,_,k]);const C=y.useCallback(()=>{l.send({type:"iframe loaded"})},[l]),V=y.useMemo(()=>(x||n==="connecting"&&!_)&&!A,[A,x,_,n]),W=y.useSyncExternalStore(y.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),q=y.useMemo(()=>[V?"background":"active",x?"reloading":"idle",W?"":o,k&&!A?"timedOut":""],[W,A,x,V,k,o]),[L,K]=y.useState(o),[J,X]=y.useState(er[o]);y.useEffect(()=>{if(W&&o!==L){const I=()=>{K(o),X(er[o])};!w&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition({update:()=>Gn.flushSync(()=>I()),types:["sanity-iframe-viewport"]}):I()}},[W,w,L,o]);const B=Ot(),te=_r(m),[M,F]=y.useState(!1),[H]=y.useState(new Set),ee=It(I=>{if(te.some(G=>G.test(I))){F(I);return}H.has(I)||(H.add(I),console.warn("Visual Editing is here but misconfigured",{reportedOrigin:I}),B.push({closable:!0,id:`presentation-iframe-origin-mismatch-${I}`,status:"error",duration:1/0,title:v("preview-frame.configuration.error.title"),description:u.jsx(wr,{t:v,i18nKey:"preview-frame.configuration.error.description",components:{Code:"code"},values:{targetOrigin:f.origin,reportedOrigin:I}})}))}),Y=Qn(),re=It(I=>{if(!M)return;const G=new URL(I,M);Y(`${M}${G.pathname}${G.search}${G.hash}`)});return y.useEffect(()=>{if(!M)return;const I=P.current?.contentWindow;if(!I)return;const G=Gr({targetOrigin:M});G.addTarget(I);const Q=G.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},sr().provide({actors:ir()}));Q.on("visual-editing/navigate",xe=>{re(xe.url)});const oe=Q.start();return()=>{oe(),G.destroy()}},[M]),y.useEffect(()=>{if(n==="connecting"||n==="reconnecting"){const I=setInterval(()=>{P.current?.contentWindow?.postMessage({domain:"sanity/channels",from:"presentation",type:"presentation/status"},"*")},1e3),G=new AbortController;return window.addEventListener("message",({data:Q})=>{Q&&typeof Q=="object"&&"domain"in Q&&Q.domain==="sanity/channels"&&"type"in Q&&Q.type==="visual-editing/status"&&"data"in Q&&typeof Q.data=="object"&&Q.data&&"origin"in Q.data&&typeof Q.data.origin=="string"&&ee(Q.data.origin)},{signal:G.signal}),()=>{G.abort(),clearInterval(I)}}},[n,S]),u.jsx(Na,{transition:w?{duration:0}:void 0,children:u.jsxs(Xn,{children:[j,u.jsx(he,{flex:1,tone:"transparent",children:u.jsxs(ue,{align:"center",height:"fill",justify:"center",padding:(W?L:o)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:T?"wait":void 0},children:[u.jsx(Qr,{children:!R&&!x&&!_&&k&&!A?u.jsx(Zt,{initial:"initial",animate:"animate",exit:"exit",variants:Ur,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ue,{style:{...Dt[o]},justify:"center",align:"center",direction:"column",gap:4,children:[S&&u.jsx(ze,{disabled:!0,mode:"ghost",text:v("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(he,{radius:2,tone:S?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ue,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ut,{muted:!0}),u.jsx(ie,{muted:!0,size:1,children:S?v("preview-frame.status",{context:"timeout"}):v("preview-frame.status",{context:"connecting"})})]})}),S&&u.jsx(ze,{tone:"critical",onClick:O,text:v("preview-frame.continue-button.text")})]})}):(x||n==="connecting"&&!_)&&!A?u.jsx(Zt,{initial:"initial",animate:"animate",exit:"exit",variants:Ur,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ue,{style:{...Dt[o]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ut,{muted:!0}),u.jsx(ie,{muted:!0,size:1,children:v("preview-frame.status",{context:"loading"})})]})}):R&&!A?u.jsx(Zt,{initial:"initial",animate:"animate",exit:"exit",variants:Gi,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Sr,{flex:1,message:v("preview-frame.connection.error.text"),onRetry:U,onContinueAnyway:O,children:b&&u.jsxs(u.Fragment,{children:[n!=="connected"&&u.jsx(he,{padding:3,radius:2,tone:"critical",children:u.jsxs(qe,{space:3,children:[u.jsx($t,{muted:!0,size:0,children:v("preview-frame.overlay.connection-status.label")}),u.jsx(Mt,{size:1,children:v("channel.status",{context:n})})]})}),s!=="connected"&&u.jsx(he,{padding:3,radius:2,tone:"critical",children:u.jsxs(qe,{space:3,children:[u.jsx($t,{muted:!0,size:0,children:v("preview-frame.loader.connection-status.label")}),u.jsx(Mt,{size:1,children:v("channel.status",{context:s})})]})})]})})}):null}),u.jsx(_i,{animate:q,initial:["background"],onLoad:C,preventClick:V,ref:P,src:f.toString(),style:J,variants:er})]})})]})})}));xn.displayName="Memo(ForwardRef(Preview))";const Dt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Ur={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Gi={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},er={desktop:{...Dt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...Dt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function Qi(){let t=!1;return(...e)=>{t||(console.warn(...e),t=!0)}}const Xi=Qi();function Ji(t,e){const r=z.c(11);Hn(t);let a;r[0]===Symbol.for("react.memo_cache_sentinel")?(a={},r[0]=a):a=r[0];const[s,n]=y.useState(a);let i;r[1]===Symbol.for("react.memo_cache_sentinel")?(i={},r[1]=i):i=r[1];const[o,c]=y.useState(i),l=y.useRef("");let m;r[2]!==e?(m=(P,j,x)=>{const S=(x===void 0?[]:x).filter(Zi);(j==="published"?n:c)(E=>{const _={};for(const g of S)_[g._id]=g;if(l.current!==e.current.url)return l.current=e.current.url,{[P]:_};const R=E[P];return Wa(R,_)?E:{...E,[P]:_}})},r[2]=e,r[3]=m):m=r[3];const p=m,h=t==="published"?s:o;let d;r[4]!==h?(d=Object.values(h).reduce(Yi,{}),r[4]=h,r[5]=d):d=r[5];const f=d;let v;r[6]!==f?(v=Object.values(f),r[6]=f,r[7]=v):v=r[7];const b=v;let w;return r[8]!==b||r[9]!==p?(w=[b,p],r[8]=b,r[9]=p,r[10]=w):w=r[10],w}function Yi(t,e){return Object.values(e).forEach(r=>{t[r._id]=r}),t}function Zi(t){return"_projectId"in t&&t._projectId?(Xi("Cross dataset references are not supported yet, ignoring source document",t),!1):t}function Pn(t,e){return t instanceof Function?t(e):t}function eo(t,e){if(t.resolve){const r=t.resolve(e)?.filter;return r?`// groq
*[${r}][0]{_id, _type}`:void 0}return"type"in t?`// groq
*[_type == "${t.type}"][0]{_id, _type}`:`// groq
*[${Pn(t.filter,e)}][0]{_id, _type}`}function to(t,e){return t.resolve?t.resolve(e)?.params??e.params:"type"in t?{}:Pn(t.params,e)??e.params}function ro(t,e){const r=Array.isArray(t)?t:[t];for(t of r){let{origin:a}=e,s=t;if(typeof t=="string")try{const n=new URL(t);if(n.origin!==a)continue;a=n.origin,s=n.pathname}catch{}try{const n=vs(s,{decode:decodeURIComponent})(e.pathname);if(n){const{params:i,path:o}=n;return{origin:a,params:i,path:o}}}catch(n){throw new Error(`"${t}" is not a valid route pattern`,{cause:n})}}}function no(t){const e=z.c(22),{navigate:r,navigationHistory:a,path:s,targetOrigin:n,resolvers:i,perspective:o}=t;let c;e[0]!==i?(c=i===void 0?[]:i,e[0]=i,e[1]=c):c=e[1];const l=c,{state:m}=bt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:zt},e[2]=p):p=e[2];const h=Lt(p);let d;e[3]!==s||e[4]!==m?(d=s||m._searchParams?.find(ao)?.[1]||"",e[3]=s,e[4]=m,e[5]=d):d=e[5];const f=d,[v,b]=y.useState(void 0),w=y.useRef(void 0);let P;e[6]!==r||e[7]!==a?(P=(E,_)=>{(!E||w.current!==E._id)&&(b({document:E,path:_.pathname}),w.current=E?._id,a.at(-1)?.id===a.at(-2)?.id&&r?.({state:{id:E?._id,type:E?._type}}))},e[6]=r,e[7]=a,e[8]=P):P=e[8];const j=It(P);let x;e[9]!==h||e[10]!==j||e[11]!==o||e[12]!==f||e[13]!==l||e[14]!==n?(x=()=>{const E=new URL(f,n);if(l.length){let _;for(const R of l){const g=ro(R.route,E);if(g){_={context:g,resolver:R};break}}if(_){const R=eo(_.resolver,_.context),g=to(_.resolver,_.context);if(R){const T=new AbortController,U={perspective:o,signal:T.signal,tag:"use-main-document"};return h.fetch(R,g,U).then(A=>j(A,E)).catch(A=>{A instanceof Error&&A.name==="AbortError"||(b({document:void 0,path:E.pathname}),w.current=void 0)}),()=>{T.abort()}}}}b(void 0),w.current=void 0},e[9]=h,e[10]=j,e[11]=o,e[12]=f,e[13]=l,e[14]=n,e[15]=x):x=e[15];let S;return e[16]!==h||e[17]!==o||e[18]!==f||e[19]!==l||e[20]!==n?(S=[h,o,f,l,n],e[16]=h,e[17]=o,e[18]=f,e[19]=l,e[20]=n,e[21]=S):S=e[21],y.useEffect(x,S),v}function ao(t){const[e]=t;return e==="preview"}const so=/^([\w-]+):(0|[1-9][0-9]*)$/,io=/^([\w-]+):([0-9]+),([0-9]+)$/,oo=/^([\w-]+):([\w-]+)$/;function co(t){const e=[];for(const r of t.split(".")){const a=so.exec(r);if(a){e.push(a[1],Number(a[2]));continue}const s=io.exec(r);if(s){e.push(s[1],[Number(s[2]),Number(s[3])]);continue}const n=oo.exec(r);if(n){e.push(n[1],{_key:n[2]});continue}e.push(r)}return e}function lo(t){if(t===void 0)return;const e=decodeURIComponent(t)?.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function uo(t){if(t!==void 0)return Xr.toString(co(decodeURIComponent(t)))}function po(t){return{id:lo(t.id),path:uo(t.path),type:t.type}}function $r(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}const Sn=()=>t=>t,mo=Sn()(["perspective","preview","viewport"]),ho=Sn()(["changesInspectorTab","comment","inspect","instruction","scheduledDraft","parentRefPath","path","pathKey","rev","since","template","templateParams","version","view"]);function fo(t){const e=z.c(56),{initialPreviewUrl:r,routerNavigate:a,routerState:s,routerSearchParams:n}=t;let i;e[0]!==s?(i=po(s),e[0]=s,e[1]=i):i=e[1];const{id:o,path:c,type:l}=i;let m;e[2]!==r||e[3]!==n.preview?(m=n.preview||r.toString(),e[2]=r,e[3]=n.preview,e[4]=m):m=e[4];const p=n.changesInspectorTab;let h;e[5]!==o||e[6]!==c||e[7]!==n.comment||e[8]!==n.inspect||e[9]!==n.instruction||e[10]!==n.parentRefPath||e[11]!==n.pathKey||e[12]!==n.perspective||e[13]!==n.rev||e[14]!==n.scheduledDraft||e[15]!==n.since||e[16]!==n.template||e[17]!==n.templateParams||e[18]!==n.view||e[19]!==n.viewport||e[20]!==m||e[21]!==p||e[22]!==l?(h={id:o,type:l,path:c,preview:m,perspective:n.perspective,viewport:n.viewport,inspect:n.inspect,scheduledDraft:n.scheduledDraft,parentRefPath:n.parentRefPath,rev:n.rev,since:n.since,template:n.template,templateParams:n.templateParams,view:n.view,pathKey:n.pathKey,instruction:n.instruction,comment:n.comment,changesInspectorTab:p},e[5]=o,e[6]=c,e[7]=n.comment,e[8]=n.inspect,e[9]=n.instruction,e[10]=n.parentRefPath,e[11]=n.pathKey,e[12]=n.perspective,e[13]=n.rev,e[14]=n.scheduledDraft,e[15]=n.since,e[16]=n.template,e[17]=n.templateParams,e[18]=n.view,e[19]=n.viewport,e[20]=m,e[21]=p,e[22]=l,e[23]=h):h=e[23];const d=h;let f;e[24]!==d.changesInspectorTab||e[25]!==d.comment||e[26]!==d.inspect||e[27]!==d.instruction||e[28]!==d.parentRefPath||e[29]!==d.path||e[30]!==d.pathKey||e[31]!==d.rev||e[32]!==d.scheduledDraft||e[33]!==d.since||e[34]!==d.template||e[35]!==d.templateParams||e[36]!==d.view?(f=$r({inspect:d.inspect,scheduledDraft:d.scheduledDraft,path:d.path,parentRefPath:d.parentRefPath,rev:d.rev,since:d.since,template:d.template,templateParams:d.templateParams,view:d.view,pathKey:d.pathKey,instruction:d.instruction,comment:d.comment,changesInspectorTab:d.changesInspectorTab}),e[24]=d.changesInspectorTab,e[25]=d.comment,e[26]=d.inspect,e[27]=d.instruction,e[28]=d.parentRefPath,e[29]=d.path,e[30]=d.pathKey,e[31]=d.rev,e[32]=d.scheduledDraft,e[33]=d.since,e[34]=d.template,e[35]=d.templateParams,e[36]=d.view,e[37]=f):f=e[37];const v=f;let b;e[38]!==d.perspective||e[39]!==d.preview||e[40]!==d.viewport?(b=$r({perspective:d.perspective,preview:d.preview,viewport:d.viewport}),e[38]=d.perspective,e[39]=d.preview,e[40]=d.viewport,e[41]=b):b=e[41];const w=b,P=y.useRef(s);let j,x;e[42]!==s?(j=()=>{P.current=s},x=[s],e[42]=s,e[43]=j,e[44]=x):(j=e[43],x=e[44]),y.useLayoutEffect(j,x);let S;e[45]!==s?(S=[s],e[45]=s,e[46]=S):S=e[46];const[E,_]=y.useState(S);let R;e[47]===Symbol.for("react.memo_cache_sentinel")?(R=$=>{const{id:O,type:k}=$,{current:N}=P;return O===N.id&&k===N.type},e[47]=R):R=e[47];const g=R;let T;e[48]!==a?(T=$=>{const{state:O,params:k,replace:N}=$,C=N===void 0?!1:N;O?.id&&(O.id=Pt(O.id));const{current:V}=P,W={id:V.id,type:V.type,path:V.path},q=Object.fromEntries(V._searchParams||[]),L=O||W,K={...[...mo,...g(L)?ho:[]].reduce((X,B)=>(X[B]=q[B],X),{}),...k},J={...L,_searchParams:Object.entries(K).reduce(go,[])};_(X=>[...X,J]),a(J,{replace:C})},e[48]=a,e[49]=T):T=e[49];const U=T;let A;return e[50]!==U||e[51]!==E||e[52]!==d||e[53]!==w||e[54]!==v?(A={isSameDocument:g,navigate:U,navigationHistory:E,params:d,searchParams:w,structureParams:v},e[50]=U,e[51]=E,e[52]=d,e[53]=w,e[54]=v,e[55]=A):A=e[55],A}function go(t,e){const[r,a]=e;return[...t,[r,a]]}const vo=t=>{const e=z.c(10),[r,a]=y.useState(wo);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=p=>{const h=window.open(p,"_blank");h&&a(d=>new Set(d).add(h))},e[0]=s):s=e[0];const n=s;let i,o;e[1]!==t||e[2]!==r?(i=()=>{const p=[];if(r.size&&t)for(const h of r)h&&"closed"in h&&!h.closed&&p.push(t.addTarget(h));return()=>{p.forEach(yo)}},o=[t,r],e[1]=t,e[2]=r,e[3]=i,e[4]=o):(i=e[3],o=e[4]),y.useEffect(i,o);let c,l;e[5]!==r?(c=()=>{if(r.size){const p=setInterval(()=>{const h=new Set;for(const d of r)d&&"closed"in d&&d.closed&&h.add(d);h.size&&a(d=>{const f=new Set(d);for(const v of h)f.delete(v);return f})},oa);return()=>{clearInterval(p)}}},l=[r],e[5]=r,e[6]=c,e[7]=l):(c=e[6],l=e[7]),y.useEffect(c,l);let m;return e[8]!==r?(m={popups:r,open:n},e[8]=r,e[9]=m):m=e[9],m};function wo(){return new Set}function yo(t){return t()}function _n(t){const e=z.c(5),{scheduledDraft:r}=t,{selectedPerspectiveName:a,selectedReleaseId:s,perspectiveStack:n}=qr(),i=a===void 0?"drafts":a;let o;return e[0]!==n||e[1]!==r||e[2]!==i||e[3]!==s?(o=s||r?[r,...n]:i,e[0]=n,e[1]=r,e[2]=i,e[3]=s,e[4]=o):o=e[4],o}function tr(){const t=z.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,t[0]=e):e=t[0];const[r,a]=y.useState(e);let s;e:{const l=Array.from(r.values());if(l.find(Po)){s="connected";break e}const m=l.filter(xo);if(m.length){s=m.some(bo)?"connecting":"reconnecting";break e}s="idle"}const n=s;let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=l=>{a(m=>{const p=new Map(m);if(l.status==="disconnected")p.delete(l.connection);else{const h=p.get(l.connection)?.hasConnected||l.status==="connected",d=l.status==="handshaking"?"connecting":l.status;p.set(l.connection,{status:d,hasConnected:h})}return p})},t[1]=i):i=t[1];const o=i;let c;return t[2]!==n?(c=[n,o],t[2]=n,t[3]=c):c=t[3],c}function bo(t){const{hasConnected:e}=t;return!e}function xo(t){const{status:e}=t;return e==="connecting"}function Po(t){const{status:e}=t;return e==="connected"}const So=y.lazy(()=>We(()=>import("./LiveQueries-BPeGjFl7.js"),__vite__mapDeps([2,1,3]))),_o=y.lazy(()=>We(()=>import("./PostMessageDocuments-BP53yoTj.js"),__vite__mapDeps([4,1]))),jo=y.lazy(()=>We(()=>import("./PostMessageRefreshMutations-BgtD_hHA.js"),__vite__mapDeps([5,1]))),Eo=y.lazy(()=>We(()=>import("./PostMessagePerspective-CfEY8nZU.js"),__vite__mapDeps([6,1]))),Ro=y.lazy(()=>We(()=>import("./PostMessagePreviewSnapshots-I52x96s1.js"),__vite__mapDeps([7,1]))),Co=y.lazy(()=>We(()=>import("./PostMessageSchema-0-5HZzOM.js"),__vite__mapDeps([8,1]))),To=y.lazy(()=>We(()=>import("./PostMessageTelemetry-BGnJQy2_.js"),__vite__mapDeps([9,1]))),ko=be(ue)`
  overflow-x: auto;
`;function Ao(t){const e=z.c(196),{canToggleSharePreviewAccess:r,canUseSharedPreviewAccess:a,tool:s,vercelProtectionBypass:n,initialPreviewUrl:i,previewUrlRef:o}=t,c=_r(o),l=bn(o),m=s.options?.components,p=s.name||Nn;let h;e[0]!==m?(h=m||{},e[0]=m,e[1]=h):h=e[1];const{unstable_navigator:d,unstable_header:f}=h,{navigate:v,state:b}=bt();let w;e[2]!==b._searchParams?(w=Object.fromEntries(b._searchParams||[]),e[2]=b._searchParams,e[3]=w):w=e[3];const P=Hr(w),j=se(o,Uo);let x;e[4]!==s.options?.devMode?(x=()=>{const D=s.options?.devMode;return typeof D=="function"?D():typeof D=="boolean"?D:typeof window<"u"&&window.location.hostname==="localhost"},e[4]=s.options?.devMode,e[5]=x):x=e[5];const[S]=y.useState(x),E=y.useRef(null),[_,R]=y.useState(),[g,T]=y.useState(null);let U;e[6]===Symbol.for("react.memo_cache_sentinel")?(U={title:void 0,url:void 0},e[6]=U):U=e[6];const A=y.useRef(U);let $;e[7]!==i||e[8]!==v||e[9]!==P||e[10]!==b?($={initialPreviewUrl:i,routerNavigate:v,routerState:b,routerSearchParams:P,frameStateRef:A},e[7]=i,e[8]=v,e[9]=P,e[10]=b,e[11]=$):$=e[11];const{isSameDocument:O,navigate:k,navigationHistory:N,params:C,searchParams:V,structureParams:W}=fo($);let q;e[12]!==C.scheduledDraft?(q={scheduledDraft:C.scheduledDraft},e[12]=C.scheduledDraft,e[13]=q):q=e[13];const L=_n(q),K=Kr(Cs),J=C.viewport?"mobile":"desktop",[X,B]=Ji(L,A),te=Fn(),M=Vn(),F=s.options?.resolve?.mainDocuments;let H;e[14]!==k||e[15]!==N||e[16]!==C.preview||e[17]!==L||e[18]!==F||e[19]!==l?(H={navigate:k,navigationHistory:N,path:C.preview,targetOrigin:l,resolvers:F,perspective:L},e[14]=k,e[15]=N,e[16]=C.preview,e[17]=L,e[18]=F,e[19]=l,e[20]=H):H=e[20];const ee=no(H),[Y,re]=tr(),[I,G]=tr(),[Q,oe]=tr(),{open:xe}=vo(_),fe=se(K,Io);let ge,pe;e[21]!==fe||e[22]!==l?(ge=()=>{const D=E.current?.contentWindow;if(!D||fe)return;const ne=Gr({targetOrigin:l});return ne.addTarget(D),R(ne),()=>{ne.destroy(),R(void 0)}},pe=[l,fe],e[21]=fe,e[22]=l,e[23]=ge,e[24]=pe):(ge=e[23],pe=e[24]),y.useEffect(ge,pe);let ve;e[25]!==k?(ve=D=>{k(D)},e[25]=k,e[26]=ve):ve=e[26];const me=It(ve),De=y.useRef(void 0);let Pe;e[27]!==_||e[28]!==me||e[29]!==K||e[30]!==B||e[31]!==re||e[32]!==l?(Pe=()=>{if(!_)return;const D=_.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},sr().provide({actors:ir()}));D.on("visual-editing/focus",Z=>{"id"in Z&&me({state:{type:Z.type,id:Z.id,path:Z.path}})}),D.on("visual-editing/navigate",Z=>{const{title:gt}=Z;let He=Z.url;if(!He.startsWith("http"))try{He=new URL(He,l).toString()}catch{}if(A.current.url!==He){const Rn=()=>{const[Cn,Tn]=He.split("?"),At=new URLSearchParams(Tn);At.delete(vt),At.delete(mr),me({params:{preview:`${Cn}${At.size>0?"?":""}${At}`}})};try{Rn()}catch{me({params:{preview:He}})}}A.current={title:gt,url:He}}),D.on("visual-editing/meta",Z=>{A.current.title=Z.title}),D.on("visual-editing/toggle",Z=>{K.send({type:"toggle visual editing overlays",enabled:Z.enabled})}),D.on("visual-editing/documents",Z=>{B("visual-editing",Z.perspective,Z.documents)}),D.on("visual-editing/refreshing",Z=>{Z.source==="manual"?clearTimeout(De.current):Z.source==="mutation"&&K.send({type:"iframe refresh"})}),D.on("visual-editing/refreshed",()=>{K.send({type:"iframe loaded"})}),D.onStatus(re);const ne=D.start();return T(D),()=>{ne(),T(null)}},e[27]=_,e[28]=me,e[29]=K,e[30]=B,e[31]=re,e[32]=l,e[33]=Pe):Pe=e[33];let Le;e[34]!==_||e[35]!==K||e[36]!==B||e[37]!==re||e[38]!==l?(Le=[_,K,B,re,l],e[34]=_,e[35]=K,e[36]=B,e[37]=re,e[38]=l,e[39]=Le):Le=e[39],y.useEffect(Pe,Le);let Se;e[40]!==_||e[41]!==M||e[42]!==te||e[43]!==B||e[44]!==oe?(Se=()=>{if(!_)return;const D=_.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},sr().provide({actors:ir()}));return D.onStatus(oe),D.on("preview-kit/documents",ne=>{ne.projectId===te&&ne.dataset===M&&B("preview-kit",ne.perspective,ne.documents)}),D.start()},e[40]=_,e[41]=M,e[42]=te,e[43]=B,e[44]=oe,e[45]=Se):Se=e[45];let Ne;e[46]!==_||e[47]!==M||e[48]!==te||e[49]!==B||e[50]!==oe||e[51]!==l?(Ne=[_,M,te,B,oe,l],e[46]=_,e[47]=M,e[48]=te,e[49]=B,e[50]=oe,e[51]=l,e[52]=Ne):Ne=e[52],y.useEffect(Se,Ne);let _e;e[53]!==O||e[54]!==k?(_e=pn(D=>{O(D)&&k({state:D,replace:!0})},0),e[53]=O,e[54]=k,e[55]=_e):_e=e[55];const Ue=_e;let je;e[56]!==c||e[57]!==k||e[58]!==C.preview||e[59]!==l?(je=D=>{const ne=new URL(D,l),Z=ne.toString();C.preview!==Z&&(Array.isArray(c)?c.some(gt=>gt.test(Z))&&k({params:{preview:Z}}):ne.origin===l&&k({params:{preview:Z}}))},e[56]=c,e[57]=k,e[58]=C.preview,e[59]=l,e[60]=je):je=e[60];const $e=je;let Ee;e[61]!==k?(Ee=D=>{k({params:D})},e[61]=k,e[62]=Ee):Ee=e[62];const Ke=Ee;let Re;e[63]!==k?(Re=D=>{k(D)},e[63]=k,e[64]=Re):Re=e[64];const Me=Re;let Oe,Ce;e[65]!==C.id||e[66]!==C.path||e[67]!==g?(Oe=()=>{C.id&&C.path?g?.post("presentation/focus",{id:C.id,path:C.path}):g?.post("presentation/blur")},Ce=[C.id,C.path,g],e[65]=C.id,e[66]=C.path,e[67]=g,e[68]=Oe,e[69]=Ce):(Oe=e[68],Ce=e[69]),y.useEffect(Oe,Ce);let Fe,Te;e[70]!==Y||e[71]!==C.preview||e[72]!==l||e[73]!==g?(Fe=()=>{if(A.current.url&&C.preview&&A.current.url!==C.preview){try{const D=new URL(A.current.url,l).origin,ne=new URL(C.preview,l).origin;if(D!==ne)return}catch{}if(A.current.url=C.preview,Y==="connected"){let D=C.preview;if(D.startsWith("http"))try{const ne=new URL(C.preview,l);D=ne.pathname+ne.search+ne.hash}catch{}g?.post("presentation/navigate",{url:D,type:"replace"})}}},Te=[Y,l,C.preview,g],e[70]=Y,e[71]=C.preview,e[72]=l,e[73]=g,e[74]=Fe,e[75]=Te):(Fe=e[74],Te=e[75]),y.useEffect(Fe,Te);let ke;e[76]!==g?(ke=()=>g?.post("presentation/toggle-overlay"),e[76]=g,e[77]=ke):ke=e[77];const de=ke,[Ve,ft]=y.useState(null);let St,_t;e[78]!==de?(St=()=>{const D=Z=>{Mr(Z)&&de()},ne=Z=>{Mr(Z)&&de(),Mo(["mod","\\"],Z)&&de()};return window.addEventListener("keydown",ne),window.addEventListener("keyup",D),()=>{window.removeEventListener("keydown",ne),window.removeEventListener("keyup",D)}},_t=[de],e[78]=de,e[79]=St,e[80]=_t):(St=e[79],_t=e[80]),y.useEffect(St,_t);const[Wt,jn]=y.useState(null);let jt;e[81]!==d?(jt={unstable_navigator:d},e[81]=d,e[82]=jt):jt=e[82];const[En,Nt]=vi(jt),{navigatorEnabled:Et,toggleNavigator:Ft}=En;let Rt;e[83]!==I||e[84]!==K||e[85]!==Q||e[86]!==g?(Rt=D=>{if(K.send({type:"iframe refresh"}),g){De.current=window.setTimeout(D,300),g.post("presentation/refresh",{source:"manual",livePreviewEnabled:Q==="connected"||I==="connected"});return}D()},e[83]=I,e[84]=K,e[85]=Q,e[86]=g,e[87]=Rt):Rt=e[87];const Vt=Rt,Bt=Bn();let Ct;e[88]!==C.preview||e[89]!==Bt.name?(Ct=D=>{const{id:ne,type:Z,path:gt}=D;if(A.current.url)return{title:A.current.title||A.current.url,name:"edit",params:{id:ne,path:gt,type:Z,inspect:la,workspace:Bt.name,mode:ca,preview:C.preview}}},e[88]=C.preview,e[89]=Bt.name,e[90]=Ct):Ct=e[90];const Kt=Ct;let Tt;e[91]!==k?(Tt=D=>{k({params:{viewport:D==="desktop"?void 0:"mobile"},replace:!0})},e[91]=k,e[92]=Tt):Tt=e[92];const Ht=Tt;let Ge;e[93]!==Nt?(Ge=u.jsx(Nt,{}),e[93]=Nt,e[94]=Ge):Ge=e[94];const qt=Et?50:75;let Qe;e[95]!==j||e[96]!==r||e[97]!==a||e[98]!==xe||e[99]!==$e||e[100]!==Vt||e[101]!==i||e[102]!==I||e[103]!==Et||e[104]!==Y||e[105]!==C.preview||e[106]!==L||e[107]!==K||e[108]!==o||e[109]!==Ht||e[110]!==l||e[111]!==Ft||e[112]!==de||e[113]!==f||e[114]!==n||e[115]!==J?(Qe=u.jsx(xn,{canSharePreviewAccess:j,canToggleSharePreviewAccess:r,canUseSharedPreviewAccess:a,header:f,initialUrl:i,loadersConnection:I,navigatorEnabled:Et,onPathChange:$e,onRefresh:Vt,openPopup:xe,overlaysConnection:Y,previewUrl:C.preview,perspective:L,ref:E,setViewport:Ht,targetOrigin:l,toggleNavigator:Ft,toggleOverlay:de,viewport:J,vercelProtectionBypass:n,presentationRef:K,previewUrlRef:o},l),e[95]=j,e[96]=r,e[97]=a,e[98]=xe,e[99]=$e,e[100]=Vt,e[101]=i,e[102]=I,e[103]=Et,e[104]=Y,e[105]=C.preview,e[106]=L,e[107]=K,e[108]=o,e[109]=Ht,e[110]=l,e[111]=Ft,e[112]=de,e[113]=f,e[114]=n,e[115]=J,e[116]=Qe):Qe=e[116];let Xe;e[117]!==Wt||e[118]!==Qe?(Xe=u.jsx(ue,{direction:"column",flex:1,height:"fill",ref:jn,children:u.jsx(ua,{element:Wt,children:Qe})}),e[117]=Wt,e[118]=Qe,e[119]=Xe):Xe=e[119];let Je;e[120]!==qt||e[121]!==Xe?(Je=u.jsx(Pr,{id:"preview",minWidth:325,defaultSize:qt,order:3,children:Xe}),e[120]=qt,e[121]=Xe,e[122]=Je):Je=e[122];let Ye;e[123]!==X||e[124]!==Kt||e[125]!==Me||e[126]!==Ue||e[127]!==Ke||e[128]!==ee||e[129]!==C.id||e[130]!==C.type||e[131]!==V||e[132]!==W?(Ye=u.jsx(hi,{documentId:C.id,documentsOnPage:X,documentType:C.type,getCommentIntent:Kt,mainDocumentState:ee,onEditReference:Me,onFocusPath:Ue,onStructureParams:Ke,searchParams:V,setDisplayedDocument:ft,structureParams:W}),e[123]=X,e[124]=Kt,e[125]=Me,e[126]=Ue,e[127]=Ke,e[128]=ee,e[129]=C.id,e[130]=C.type,e[131]=V,e[132]=W,e[133]=Ye):Ye=e[133];let Ze;e[134]!==Ge||e[135]!==Je||e[136]!==Ye?(Ze=u.jsx(ko,{"data-testid":"presentation-root",height:"fill",children:u.jsxs(Ws,{children:[Ge,Je,Ye]})}),e[134]=Ge,e[135]=Je,e[136]=Ye,e[137]=Ze):Ze=e[137];let et;e[138]!==Ze||e[139]!==g?(et=u.jsx(Ts,{comlink:g,children:Ze}),e[138]=Ze,e[139]=g,e[140]=et):et=e[140];let tt;e[141]!==C||e[142]!==et?(tt=u.jsx(xi,{params:C,children:et}),e[141]=C,e[142]=et,e[143]=tt):tt=e[143];let rt;e[144]!==k||e[145]!==tt?(rt=u.jsx(fi,{navigate:k,children:tt}),e[144]=k,e[145]=tt,e[146]=rt):rt=e[146];let nt;e[147]!==S||e[148]!==p||e[149]!==k||e[150]!==C||e[151]!==V||e[152]!==W||e[153]!==rt?(nt=u.jsx(Pi,{devMode:S,name:p,navigate:k,params:C,searchParams:V,structureParams:W,children:rt}),e[147]=S,e[148]=p,e[149]=k,e[150]=C,e[151]=V,e[152]=W,e[153]=rt,e[154]=nt):nt=e[154];let at;e[155]!==_||e[156]!==Ve||e[157]!==L||e[158]!==B||e[159]!==G?(at=_&&u.jsx(So,{controller:_,perspective:L,liveDocument:Ve,onDocumentsOnPage:B,onLoadersConnection:G}),e[155]=_,e[156]=Ve,e[157]=L,e[158]=B,e[159]=G,e[160]=at):at=e[160];let st;e[161]!==I||e[162]!==C.id||e[163]!==C.type||e[164]!==Q||e[165]!==g?(st=g&&C.id&&C.type&&u.jsx(jo,{comlink:g,id:C.id,type:C.type,loadersConnection:I,previewKitConnection:Q}),e[161]=I,e[162]=C.id,e[163]=C.type,e[164]=Q,e[165]=g,e[166]=st):st=e[166];let it;e[167]!==L||e[168]!==g?(it=g&&u.jsx(Co,{comlink:g,perspective:L}),e[167]=L,e[168]=g,e[169]=it):it=e[169];let ot;e[170]!==X||e[171]!==L||e[172]!==g?(ot=g&&X.length>0&&u.jsx(Ro,{comlink:g,perspective:L,refs:X}),e[170]=X,e[171]=L,e[172]=g,e[173]=ot):ot=e[173];let ct;e[174]!==L||e[175]!==g?(ct=g&&u.jsx(_o,{comlink:g,perspective:L}),e[174]=L,e[175]=g,e[176]=ct):ct=e[176];let lt;e[177]!==g?(lt=g&&u.jsx(Es,{comlink:g}),e[177]=g,e[178]=lt):lt=e[178];let ut;e[179]!==L||e[180]!==g?(ut=g&&u.jsx(Eo,{comlink:g,perspective:L}),e[179]=L,e[180]=g,e[181]=ut):ut=e[181];let dt;e[182]!==g?(dt=g&&u.jsx(To,{comlink:g}),e[182]=g,e[183]=dt):dt=e[183];let pt;e[184]!==at||e[185]!==st||e[186]!==it||e[187]!==ot||e[188]!==ct||e[189]!==lt||e[190]!==ut||e[191]!==dt?(pt=u.jsxs(y.Suspense,{children:[at,st,it,ot,ct,lt,ut,dt]}),e[184]=at,e[185]=st,e[186]=it,e[187]=ot,e[188]=ct,e[189]=lt,e[190]=ut,e[191]=dt,e[192]=pt):pt=e[192];let kt;return e[193]!==nt||e[194]!==pt?(kt=u.jsxs(u.Fragment,{children:[nt,pt]}),e[193]=nt,e[194]=pt,e[195]=kt):kt=e[195],kt}function Io(t){return t.matches("loading")}function Uo(t){return t.context.previewMode?.shareAccess!==!1}function Mr(t){return t.key==="Alt"}const $o=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Dr={alt:"altKey",ctrl:"ctrlKey",mod:$o?"metaKey":"ctrlKey",shift:"shiftKey"};function Mo(t,e){return t.every(r=>Dr[r]?e[Dr[r]]:e.key===r.toUpperCase())}function Do({client:t,currentUserId:e}){return we(async()=>await Ss(t,"sanity/presentation",location.href,e))}function Lo({client:t}){return we(async()=>t.fetch(Yr,{},{tag:"presentation.fallback-to-shared-access-secret"}))}function Oo({client:t,allowOption:e}){return we(async({input:r})=>{const{initialUrl:a}=r;if(typeof URLPattern>"u"&&await We(()=>import("./index-DPyTNidZ.js"),[]),!e)return[new URLPattern(a.origin)];const s=typeof e=="function"?await e({client:t,origin,initialUrl:a}):e,n=(Array.isArray(s)?s:[s]).map(i=>{const o=new URLPattern(i);if(o.hostname==="*")throw new Error("It's insecure to allow any hostname, it could disclose data to a malicious site");return o});return n.some(i=>i.test(a.origin))?n:[...n,new URLPattern(a.origin)]})}function zo({client:t,studioBasePath:e,previewUrlOption:r,perspective:a}){return we(async({input:s})=>{const{origin:n}=location;if(typeof r=="function"){const i=await r({client:t,studioBasePath:e,previewUrlSecret:"",studioPreviewPerspective:ht(a),previewSearchParam:s.previewSearchParam});return new URL(i,n)}if(!r)return new URL("/",n);if(typeof r=="string")return new URL(r,n);if(typeof r.initial=="function"){const i=await r.initial({client:t,origin:n});return new URL(i,n)}return typeof r.initial=="string"?new URL(r.initial,n):new URL(r.preview||"/",r.origin||n)})}function Wo({client:t,previewUrlOption:e}){return we(async({input:r})=>{const{targetOrigin:a}=r;if(typeof e=="object"&&e?.draftMode)return{enable:e.draftMode.enable,shareAccess:e.draftMode.shareAccess??!0};if(!e||typeof e=="string"||typeof e=="function"||!e.previewMode)return!1;const s=typeof e.previewMode=="function"?await e.previewMode({client:t,origin,targetOrigin:a}):e.previewMode;return s===!1?!1:{enable:s.enable,shareAccess:s.shareAccess??!0}})}function No({client:t,studioBasePath:e,previewUrlOption:r,perspective:a}){return we(async({input:s})=>{const{previewUrlSecret:n,resolvedPreviewMode:i,initialUrl:o}=s;if(typeof r=="function"){const l=await r({client:t,studioBasePath:e,previewUrlSecret:n,studioPreviewPerspective:ht(a),previewSearchParam:o.toString()});return new URL(l,o)}if(!i)throw new Error("Resolved preview mode is false");const c=new URL(i.enable,o);return c.searchParams.set(pr,n),c.searchParams.set(mt,ht(a)),o.pathname!==c.pathname&&c.searchParams.set(dr,`${o.pathname}${o.search}${o.hash}`),c})}const Fo=we(async({input:t})=>{const{previewSearchParam:e,initialUrl:r,allowOrigins:a}=t;if(!e)return r;try{const s=new URL(e,r.origin);return a.some(n=>n.test(s.origin))?s:r}catch{return r}}),rr={_id:yt,_type:fr},Vo={_id:`drafts.${zr()}`,_type:Wr},Bo=lr({actions:{"notify preview will likely fail":Kn("Missing permissions to create preview secret, or read shared preview secret. Preview will likely fail loading."),"assign preview search param":ae({previewSearchParam:(t,e)=>e.previewSearchParam}),"assign error":ae({error:(t,e)=>e.error instanceof Error?e.error:new Error(e.message,{cause:e.error})})},actors:{"check permission":Br(()=>La(()=>new Error("The 'check permission' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'check permission': fromObservable(({input}: {input: CheckPermissionInput}) => ...)}})"))),"resolve initial url":we(()=>Promise.reject(new Error("The 'resolve initial url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve initial url': fromPromise(...)}})"))),"resolve allow patterns":we(()=>Promise.reject(new Error("The 'resolve allow patterns' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve allow pattern': fromPromise(...)}})"))),"resolve url from preview search param":Fo,"resolve preview mode":we(()=>Promise.reject(new Error("The 'resolve preview mode' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode': fromPromise(...)}})"))),"create preview secret":we(async()=>Promise.reject(new Error("The 'create preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'create preview secret': fromPromise(...)}})"))),"read shared preview secret":we(async()=>Promise.reject(new Error("The 'read shared preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'read shared preview secret': fromPromise(...)}})"))),"resolve preview mode url":we(()=>Promise.reject(new Error("The 'resolve preview mode url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode url': fromPromise(...)}})")))},guards:{"has checked permissions":({context:t})=>!!(t.previewAccessSharingCreatePermission&&t.previewAccessSharingReadPermission&&t.previewAccessSharingUpdatePermission&&t.previewUrlSecretPermission),"search param has new origin":({context:t,event:e})=>{if(!t.previewUrl||!e.previewSearchParam)return!1;try{const r=new URL(e.previewSearchParam,t.previewUrl);return t.previewUrl.origin!==r.origin}catch{return!1}},"can create preview secret":({context:t})=>t.previewUrlSecretPermission?.granted===!0,"has preview mode with created secret":({context:t},e)=>e===!1?!1:t.previewUrlSecretPermission?.granted===!0,"has preview mode with share access":({context:t},e)=>e===!1?!1:t.previewAccessSharingReadPermission?.granted===!0,"has preview mode without permissions":({context:t},e)=>e===!1?!1:t.previewAccessSharingReadPermission?.granted===!1&&t.previewUrlSecretPermission?.granted===!1},delays:{expiredSecret:({context:t})=>{if(!t.previewUrlSecret?.expiresAt)return 0;const e=Date.now(),r=t.previewUrlSecret.expiresAt.getTime();return Math.max(r-e,0)}}}).createMachine({id:"Preview URL",context:({input:t})=>({initialUrl:null,previewUrl:null,error:null,allowOrigins:null,previewSearchParam:t.previewSearchParam,previewUrlSecret:null,previewAccessSharingCreatePermission:null,previewAccessSharingReadPermission:null,previewAccessSharingUpdatePermission:null,previewUrlSecretPermission:null,previewMode:null}),invoke:[{src:"check permission",input:()=>({checkPermissionName:"read",document:rr}),onError:{target:".error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to check permission",error:t.error})}},onSnapshot:{actions:ae({previewAccessSharingReadPermission:({event:t})=>t.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:rr}),onError:{target:".error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to check permission",error:t.error})}},onSnapshot:{actions:ae({previewAccessSharingCreatePermission:({event:t})=>t.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"update",document:rr}),onError:{target:".error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to check permission",error:t.error})}},onSnapshot:{actions:ae({previewAccessSharingUpdatePermission:({event:t})=>t.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:Vo}),onError:{target:".error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to check permission",error:t.error})}},onSnapshot:{actions:ae({previewUrlSecretPermission:({event:t})=>t.snapshot.context??null})}}],on:{"set preview search param":{actions:{type:"assign preview search param",params:({event:t})=>({previewSearchParam:t.previewSearchParam})}}},states:{checkingPermissions:{always:{guard:"has checked permissions",target:"resolvingInitialUrl"},tags:"busy"},resolvingInitialUrl:{invoke:{src:"resolve initial url",input:({context:t})=>({previewSearchParam:t.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to resolve initial url",error:t.error})}},onDone:{target:"resolvingAllowPatterns",actions:ae({initialUrl:({event:t})=>t.output})}},tags:"busy"},error:{type:"final",tags:"error"},resolvingAllowPatterns:{invoke:{src:"resolve allow patterns",input:({context:t})=>({initialUrl:t.initialUrl}),onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to resolve preview url allow patterns",error:t.error})}},onDone:{target:"resolvingUrlFromPreviewSearchParam",actions:ae({allowOrigins:({event:t})=>t.output})}},tags:["busy"]},resolvingUrlFromPreviewSearchParam:{id:"loop",invoke:{src:"resolve url from preview search param",input:({context:t})=>({initialUrl:t.initialUrl,allowOrigins:t.allowOrigins,previewSearchParam:t.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to resolve preview url from search param",error:t.error})}},onDone:{target:"resolvingPreviewMode",actions:ae({initialUrl:({event:t})=>t.output})}},tags:["busy"]},resolvingPreviewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:t})=>({previewSearchParam:t.previewSearchParam})},target:"#loop",reenter:!0}},invoke:{src:"resolve preview mode",input:({context:t})=>({targetOrigin:t.initialUrl.origin}),onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to resolve preview url allow patterns",error:t.error})}},onDone:[{guard:{type:"has preview mode with created secret",params:({event:t})=>t.output},actions:ae({previewMode:({event:t})=>t.output}),target:"previewMode.createPreviewSecret"},{guard:{type:"has preview mode with share access",params:({event:t})=>t.output},actions:ae({previewMode:({event:t})=>t.output}),target:"previewMode.readShareAccess"},{guard:{type:"has preview mode without permissions",params:({event:t})=>t.output},actions:[ae({previewUrl:({context:t})=>t.initialUrl}),"notify preview will likely fail"],target:"success"},{actions:ae({previewUrl:({context:t})=>t.initialUrl}),target:"success"}]},tags:["busy"]},success:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:t})=>({previewSearchParam:t.previewSearchParam})},target:"#loop",reenter:!0}}},previewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:t})=>({previewSearchParam:t.previewSearchParam})},target:"#loop",reenter:!0}},states:{createPreviewSecret:{invoke:{src:"create preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to create preview secret",error:t.error})}},onDone:{target:"resolvePreviewUrl",actions:ae({previewUrlSecret:({event:t})=>t.output})}},tags:["busy"]},readShareAccess:{invoke:{src:"read shared preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to read shared preview secret",error:t.error})}},onDone:{target:"resolvePreviewUrl",actions:ae({previewUrlSecret:({event:t})=>({secret:t.output,expiresAt:new Date(Date.now()+1e3*60*60*60*24)})})}},tags:["busy"]},resolvePreviewUrl:{invoke:{src:"resolve preview mode url",input:({context:t})=>({initialUrl:t.initialUrl,resolvedPreviewMode:t.previewMode,previewUrlSecret:t.previewUrlSecret.secret}),onError:{target:"error",actions:{type:"assign error",params:({event:t})=>({message:"Failed to resolve preview url",error:t.error})}},onDone:{target:"success",actions:ae({previewUrl:({event:t})=>t.output})}},tags:["busy"]},error:{type:"final",tags:["error"]},success:{after:{expiredSecret:{guard:"can create preview secret",actions:ae({previewUrlSecret:null}),target:"createPreviewSecret",reenter:!0}}}},initial:"readShareAccess"}},initial:"checkingPermissions"});function Ko(t,e){const r=z.c(25),a=Wn();let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:zt},r[0]=s):s=r[0];const n=Lt(s),i=Fr()?.id,o=Vr()?.activeWorkspace?.basePath||"/",c=bt();let l;r[1]!==c.state._searchParams?(l=new URLSearchParams(c.state._searchParams).get("preview"),r[1]=c.state._searchParams,r[2]=l):l=r[2];const m=l,{push:p}=Ot(),{t:h}=Ae(Ie);let d;r[3]===Symbol.for("react.memo_cache_sentinel")?(d={scheduledDraft:void 0},r[3]=d):d=r[3];const f=_n(d);let v;if(r[4]!==e||r[5]!==n||r[6]!==i||r[7]!==a||r[8]!==f||r[9]!==t||r[10]!==p||r[11]!==o||r[12]!==h){let S;r[14]!==p||r[15]!==h?(S=()=>p({id:"preview-url-secret.missing-grants",closable:!0,status:"error",duration:1/0,title:h("preview-url-secret.missing-grants")}),r[14]=p,r[15]=h,r[16]=S):S=r[16];let E;r[17]!==a?(E=_=>{const{input:R}=_;return a.checkDocumentPermission(R.checkPermissionName,R.document)},r[17]=a,r[18]=E):E=r[18],v=Bo.provide({actions:{"notify preview will likely fail":S},actors:{"create preview secret":Do({client:n,currentUserId:i}),"read shared preview secret":Lo({client:n}),"resolve allow patterns":Oo({client:n,allowOption:e}),"resolve initial url":zo({client:n,studioBasePath:o,previewUrlOption:t,perspective:f}),"resolve preview mode":Wo({client:n,previewUrlOption:t}),"resolve preview mode url":No({client:n,studioBasePath:o,previewUrlOption:t,perspective:f}),"check permission":Br(E)}}),r[4]=e,r[5]=n,r[6]=i,r[7]=a,r[8]=f,r[9]=t,r[10]=p,r[11]=o,r[12]=h,r[13]=v}else v=r[13];let b;r[19]!==m?(b={input:{previewSearchParam:m}},r[19]=m,r[20]=b):b=r[20];const w=Kr(v,b);let P,j;r[21]!==w||r[22]!==m?(P=()=>{w.send({type:"set preview search param",previewSearchParam:m})},j=[w,m],r[21]=w,r[22]=m,r[23]=P,r[24]=j):(P=r[23],j=r[24]),y.useEffect(P,j);const x=se(w,Ho);if(x)throw x;return w}function Ho(t){return t.status==="error"?t.error:t.hasTag("error")?t.context.error:null}function qo(t){const e=z.c(9),{t:r}=Ae(Ie),{push:a}=Ot(),s=bt();let n;e[0]!==s.state._searchParams?(n=new URLSearchParams(s.state._searchParams).get("preview"),e[0]=s.state._searchParams,e[1]=n):n=e[1];const i=n,o=se(t,Qo),c=se(t,Go);let l,m;e[2]!==o||e[3]!==c||e[4]!==i||e[5]!==a||e[6]!==r?(l=()=>{if(!Array.isArray(o)||!i||!c)return;const p=new URL(i,c).origin;o.some(h=>h.test(p))||a({closable:!0,id:`presentation-iframe-origin-mismatch-${p}`,status:"error",duration:1/0,title:r("preview-search-param.configuration.error.title"),description:u.jsx(wr,{t:r,i18nKey:"preview-search-param.configuration.error.description",components:{Code:"code"},values:{previewSearchParam:i,blockedOrigin:p}})})},m=[o,c,i,a,r],e[2]=o,e[3]=c,e[4]=i,e[5]=a,e[6]=r,e[7]=l,e[8]=m):(l=e[7],m=e[8]),y.useEffect(l,m)}function Go(t){return t.context.previewUrl?.origin}function Qo(t){return t.context.allowOrigins}function Xo(){const t=z.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:zt},t[0]=e):e=t[0];const r=Lt(e),[a,s]=y.useReducer(Jo,"loading"),[n,i]=y.useState(null);let o,c;t[1]!==r?(o=()=>{const m=_s(r,p=>{i(p),s()});return()=>m()},c=[r],t[1]=r,t[2]=o,t[3]=c):(o=t[2],c=t[3]),y.useEffect(o,c);let l;return t[4]!==a||t[5]!==n?(l=[n,a],t[4]=a,t[5]=n,t[6]=l):l=t[6],l}function Jo(){return"ready"}function Yo(t){const e=z.c(8),{tool:r}=t,a=Ko(r.options?.previewUrl,r.options?.allowOrigins);qo(a);const s=se(a,nc),n=se(a,rc),i=se(a,tc),o=se(a,ec),c=se(a,Zo),[l,m]=Xo();if(!c||m==="loading"||!s||typeof s.granted>"u"||!n||typeof n.granted>"u"||!o||!i||typeof i.granted>"u"||typeof o.granted>"u"){let f;return e[0]===Symbol.for("react.memo_cache_sentinel")?(f=u.jsx(Nr,{}),e[0]=f):f=e[0],f}const p=s?.granted===!0&&n?.granted===!0,h=i?.granted===!0;let d;return e[1]!==a||e[2]!==p||e[3]!==h||e[4]!==r||e[5]!==c||e[6]!==l?(d=u.jsx(Ao,{tool:r,initialPreviewUrl:c,vercelProtectionBypass:l,canToggleSharePreviewAccess:p,canUseSharedPreviewAccess:h,previewUrlRef:a}),e[1]=a,e[2]=p,e[3]=h,e[4]=r,e[5]=c,e[6]=l,e[7]=d):d=e[7],d}function Zo(t){return t.context.previewUrl}function ec(t){return t.context.previewUrlSecretPermission}function tc(t){return t.context.previewAccessSharingReadPermission}function rc(t){return t.context.previewAccessSharingUpdatePermission}function nc(t){return t.context.previewAccessSharingCreatePermission}const ic=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"}));export{ic as P,ir as c};
